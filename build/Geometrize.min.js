/**
*   Geometrize
*   computational geometry and rendering library for JavaScript
*
*   @version 0.9.6 (2022-12-14 18:40:23)
*   https://github.com/foo123/Geometrize
*
**/!function(t,n,e){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[n]=e.call(t)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return e.moduleUri=n.uri,e.call(t)}):n in t||(t[n]=e.call(t)||1)&&"function"==typeof define&&define.amd&&define(function(){return t[n]})}("undefined"!=typeof self?self:this,"Geometrize",function(){"use strict";var v=Object.prototype.hasOwnProperty,t=Object.prototype.toString,b=Object.defineProperty,S=Math,G=S.abs,C=S.sqrt,l=S.pow,$=S.PI,w=2*$,u=1e-6,o=$/2,a=3*$/2,r=C(2),c=C(3),f=20,h=.01,_={},y=function(){},n="undefined"!=typeof global&&"[object global]"===t.call(global),x="undefined"!=typeof window&&"[object Window]"===t.call(window),i=(n?global:x&&window,{VERSION:"0.9.6",Math:{},Geometry:{}});function e(n,t,e){var r,i,o,a=v.call(t,"constructor")?t.constructor:function(){};for(r in n?(a.prototype=Object.create(n.prototype),a.prototype.$super=(i=n,o={},function(n,t){var e=":"+n;return 1===o[e]?(i.prototype.$super||y).call(this,n,t):(o[e]=1,t=("constructor"===n?i:i.prototype[n]||y).apply(this,t||[]),o[e]=0,t)})):a.prototype.$super=y,a.prototype.constructor=a,t)v.call(t,r)&&"constructor"!==r&&(a.prototype[r]=t[r]);if(e)for(r in e)v.call(e,r)&&(a[r]=e[r]);return a}var n={$changed:!1,$cb:null,dispose:function(){this.$cb=null},isChanged:function(n){return arguments.length?(this.$changed=!!n,this):this.$changed},onChange:function(n,t){var e,r=this;return!1===t&&(kt(n)||$t(n))?r.$cb&&-1!==(e=($t(n)?r.$cb.map(function(n){return dt(n.id)}):r.$cb).indexOf(n))&&r.$cb.splice(e,1):kt(n)&&(r.$cb||(r.$cb=[]),-1===(e=r.$cb.indexOf(n))&&r.$cb.push(n)),r},triggerChange:function(){var t=this;return t.$cb&&t.$cb.forEach(function(n){n(t)}),t}},k=e(null,ut(null,{constructor:function e(r){var i=this;return r instanceof e?r:i instanceof e?(r=vt(r),i.dispose=function(){r=null,e.prototype.dispose.call(i)},i.clone=function(){return new e(r)},i.val=function(n){if(arguments.length){n=n instanceof e?n.val():vt(n);var t=!ot(r,n);return r=n,t&&!i.isChanged()&&(i.isChanged(!0),i.triggerChange()),i}return r},i.valueOf=function(){return r.valueOf()},i.toString=function(){return dt(r)},void i.isChanged(!0)):new e(r)},clone:null,val:null,valueOf:null,toString:null},n)),g=e(null,{constructor:function n(t,e,r,i,o,a,s,u,l){var c=this;return t instanceof n?t:c instanceof n?(wt(t)&&9<=t.length?(c.$00=vt(t[0]),c.$01=vt(t[1]),c.$02=vt(t[2]),c.$10=vt(t[3]),c.$11=vt(t[4]),c.$12=vt(t[5])):(c.$00=t,c.$01=e,c.$02=r,c.$10=i,c.$11=o,c.$12=a),c.$20=0,c.$21=0,void(c.$22=1)):new n(t,e,r,i,o,a,s,u,l)},$00:1,$01:0,$02:0,$10:0,$11:1,$12:0,$20:0,$21:0,$22:1,clone:function(){var n=this;return new g(n.$00,n.$01,n.$02,n.$10,n.$11,n.$12,0,0,1)},eq:function(n){if(n instanceof g){var t=this;return ot(t.$00,n.$00)&&ot(t.$01,n.$01)&&ot(t.$02,n.$02)&&ot(t.$10,n.$10)&&ot(t.$11,n.$11)&&ot(t.$12,n.$12)}return!1},add:function(n){var t=this;return n instanceof g?new g(t.$00+n.$00,t.$01+n.$01,t.$02+n.$02,t.$10+n.$10,t.$11+n.$11,t.$12+n.$12,0,0,1):(n=vt(n),new g(t.$00+n,t.$01+n,t.$02+n,t.$10+n,t.$11+n,t.$12+n,0,0,1))},mul:function(n){var t=this;return n instanceof g?new g(t.$00*n.$00+t.$01*n.$10+t.$02*n.$20,t.$00*n.$01+t.$01*n.$11+t.$02*n.$21,t.$00*n.$02+t.$01*n.$12+t.$02*n.$22,t.$10*n.$00+t.$11*n.$10+t.$12*n.$20,t.$10*n.$01+t.$11*n.$11+t.$12*n.$21,t.$10*n.$02+t.$11*n.$12+t.$12*n.$22,0,0,1):(n=vt(n),new g(t.$00*n,t.$01*n,t.$02*n,t.$10*n,t.$11*n,t.$12*n,0,0,1))},det:function(){var n=this;return n.$00*(n.$11*n.$22-n.$12*n.$21)+n.$01*(n.$12*n.$20-n.$10*n.$22)+n.$02*(n.$21*n.$10-n.$11*n.$20)},inv:function(){var n,t,e,r=this,i=r.$00,o=r.$01,a=r.$02,s=r.$10,u=r.$11,l=r.$12,c=i*u-o*s;return it(c,0)?null:new g(n=u/c,t=-o/c,-n*a-t*l,e=-s/c,r=i/c,-e*a-r*l,0,0,1)},transform:function(n,t){var e=this,r=n.x,i=n.y,n=e.$00*r+e.$01*i+e.$02,e=e.$10*r+e.$11*i+e.$12;return t?(t.x=n,t.y=e):t=new M(n,e),t},getTranslation:function(){return{x:this.$02,y:this.$12}},getRotationAngle:function(){return S.atan2(this.$10,this.$00)},getScale:function(){var n=this.$00,t=-this.$01,e=this.$10,r=this.$11;return{x:rt(n)*Nn(n,e),y:rt(r)*Nn(t,r)}},toArray:function(){var n=this;return[n.$00,n.$01,n.$02,n.$10,n.$11,n.$12,n.$20,n.$21,n.$22]},toSVG:function(){var n=this;return"matrix("+dt(n.$00)+" "+dt(n.$10)+" "+dt(n.$01)+" "+dt(n.$11)+" "+dt(n.$02)+" "+dt(n.$12)+")"},toCSS:function(){var n=this;return"matrix("+dt(n.$00)+","+dt(n.$10)+","+dt(n.$01)+","+dt(n.$11)+","+dt(n.$02)+","+dt(n.$12)+")"},toCanvas:function(n){var t=this;return n.transform(t.$00,t.$10,t.$01,t.$11,t.$02,t.$12),n},toTex:function(){return g.arrayTex(this.toArray(),3,3)},toString:function(){return g.arrayString(this.toArray(),3,3)}},{eye:function(){return new g(1,0,0,0,1,0,0,0,1)},translate:function(n,t){return new g(1,0,vt(n),0,1,vt(t),0,0,1)},rotate:function(n,t,e){e=vt(e||0),t=vt(t||0),n=vt(n);var r=S.cos(n),n=S.sin(n);return new g(r,-n,t-r*t+n*e,n,r,e-r*e-n*t,0,0,1)},scale:function(n,t,e,r){return r=vt(r||0),e=vt(e||0),n=vt(n),t=vt(t),new g(n,0,-n*e+e,0,t,-t*r+r,0,0,1)},reflectX:function(){return new g(-1,0,0,0,1,0,0,0,1)},reflectY:function(){return new g(1,0,0,0,-1,0,0,0,1)},shearX:function(n){return new g(1,vt(n),0,0,1,0,0,0,1)},shearY:function(n){return new g(1,0,0,vt(n),1,0,0,0,1)},arrayTex:function(n,t,e){for(var r="\\begin{pmatrix}",i=0;i<t;++i)r+=n.slice(i*e,i*e+e).join("&"),i+1<t&&(r+="\\\\");return r+="\\end{pmatrix}"},arrayString:function(n,t,e){for(var r=n.reduce(function(n,t){return S.max(n,dt(t).length)},0),i="",o=0;o<t;++o)i+="["+n.slice(o*e,o*e+e).map(function(n){return xt(n,r)}).join(" ")+"]",o+1<t&&(i+="\n");return i},pointTex:function(n){return"\\begin{pmatrix}"+dt(n.x)+"\\\\"+dt(n.y)+"\\\\1\\end{pmatrix}"},pointString:function(n){var t=[n.x,n.y].reduce(function(n,t){return S.max(n,dt(t).length)},1);return"["+xt(n.x,t)+"]\n["+xt(n.y,t)+"]\n["+xt(1,t)+"]"}}),p=g.eye();i.Matrix=g;var m=/^#([0-9a-fA-F]{3,6})\b/,d=/^(rgba?)\b\s*\(([^\)]*)\)/i,P=/^(hsla?)\b\s*\(([^\)]*)\)/i,A=/^(hwba?)\b\s*\(([^\)]*)\)/i,T=/\s+|,/gm,j=/\/\s*(\d*?\.?\d+%?)/;function V(n,t,e,r){var i,o,a;return t/=100,i=(1-G(2*(e/=100)-1))*t,t=n/60,n=S.floor(t/2),n=i*(1-G(t-2*n-1)),e=e-i/2,e=0<=t&&t<1?(o=i+e,a=n+e,0+e):1<=t&&t<2?(o=n+e,a=i+e,0+e):2<=t&&t<3?(o=0+e,a=i+e,n+e):3<=t&&t<4?(o=0+e,a=n+e,i+e):4<=t&&t<5?(o=n+e,a=0+e,i+e):(o=i+e,a=0+e,n+e),[nt(S.round(255*o),0,255),nt(S.round(255*a),0,255),nt(S.round(255*e),0,255),r]}function B(n,t,e,r){var i=1-e/100;return e=n,n=100*i,r=r,i=(n/=100)*(1-(t=100-t/i)/200),t=S.min(i,1-i),V(e,0===t?0:100*(n-i)/t,100*i,r)}function z(n,t,e,r,i,o,a,s,u){if(9<=arguments.length){var l=1-(c=u||0);return[nt(S.round(l*n+c*i),0,255),nt(S.round(l*t+c*o),0,255),nt(S.round(l*e+c*a),0,255),nt(l*r+c*s,0,1)]}var c,l=1-(c=e||0),n=n,t=t;return 3<n.length?[nt(S.round(l*n[0]+c*t[0]),0,255),nt(S.round(l*n[1]+c*t[1]),0,255),nt(S.round(l*n[2]+c*t[2]),0,255),nt(l*n[3]+c*t[3],0,1)]:[nt(S.round(l*n[0]+c*t[0]),0,255),nt(S.round(l*n[1]+c*t[1]),0,255),nt(S.round(l*n[2]+c*t[2]),0,255)]}var E={keywords:{transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]},parse:function(n){var t,e;if(t=(n=gt(dt(n)).toLowerCase()).match(m))return!(i=t[1])||i.length<3?[0,0,0,0]:i.length<6?[nt(parseInt(i[0]+i[0],16)||0,0,255),nt(parseInt(i[1]+i[1],16)||0,0,255),nt(parseInt(i[2]+i[2],16)||0,0,255),1]:[nt(parseInt(i[0]+i[1],16)||0,0,255),nt(parseInt(i[2]+i[3],16)||0,0,255),nt(parseInt(i[4]+i[5],16)||0,0,255),1];if(t=n.match(A)){e=t[2].match(j);var r=(u=gt(t[2]).split(T).map(gt))[0]?u[0]:"0",i=u[1]?u[1]:"0",o=u[2]?u[2]:"0",a=e?e[1]:"1";return B(r=parseFloat(r,10),i="%"===i.slice(-1)?parseFloat(i,10):100*parseFloat(i,10)/255,o="%"===o.slice(-1)?parseFloat(o,10):100*parseFloat(o,10)/255,a="%"===a.slice(-1)?parseFloat(a,10)/100:parseFloat(a,10))}if(t=n.match(P)){e=t[2].match(j);var r=(u=gt(t[2]).split(T).map(gt))[0]?u[0]:"0",n=u[1]?u[1]:"0",s=u[2]?u[2]:"0",a=e?e[1]:"hsla"===t[1]&&null!=u[3]?u[3]:"1";return V(r=parseFloat(r,10),n="%"===n.slice(-1)?parseFloat(n,10):100*parseFloat(n,10)/255,s="%"===s.slice(-1)?parseFloat(s,10):100*parseFloat(s,10)/255,a="%"===a.slice(-1)?parseFloat(a,10)/100:parseFloat(a,10))}if(t=n.match(d)){e=t[2].match(j);var u,r=(u=gt(t[2]).split(T).map(gt))[0]?u[0]:"0",s=u[1]?u[1]:"0",o=u[2]?u[2]:"0",a=e?e[1]:"rgba"===t[1]&&null!=u[3]?u[3]:"1";return[r="%"===r.slice(-1)?2.55*parseFloat(r,10):parseFloat(r,10),s="%"===s.slice(-1)?2.55*parseFloat(s,10):parseFloat(s,10),o="%"===o.slice(-1)?2.55*parseFloat(o,10):parseFloat(o,10),a="%"===a.slice(-1)?parseFloat(a,10)/100:parseFloat(a,10)]}return v.call(E.keywords,n)?E.keywords[n].slice():void 0},interpolateRGB:z,toCSS:function(n,t,e,r){return 1!==arguments.length?3<arguments.length?"rgba("+n+","+t+","+e+","+r+")":"rgb("+n+","+t+","+e+")":3<n.length?"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")":"rgb("+n[0]+","+n[1]+","+n[2]+")"}};i.Color=E;var X=e(null,ut(null,{constructor:function n(t){var e=this,r=null,i=null;return t instanceof n?t:e instanceof n?(i=ut(r=n.Properties,{},n.Defaults),_t(t)&&(i=ut(r,i,t)),r.forEach(function(t){b(e,t,{get:function(){return i[t]},set:function(n){i[t]!==n&&(i[t]=n,e.isChanged()||(e.isChanged(!0),e.triggerChange()))},enumerable:!0,configurable:!1})}),e.toObj=function(){return r.reduce(function(n,t){return n[t]=i[t],n},{})},void e.isChanged(!0)):new n(t)},clone:function(){return new X(this.toObj())},toSVG:function(){var e=this.toObj();return Object.keys(e).reduce(function(n,t){return n+t+":"+dt(e[t])+";"},"")},toCanvas:function(n){var t=this;return n.lineCap=t["stroke-linecap"],n.lineJoin=t["stroke-linejoin"],n.lineWidth=t["stroke-width"],n.fillStyle="none"===t.fill?"transparent":t.fill,n.strokeStyle=t.stroke,n}},n),{Properties:["stroke-width","stroke","stroke-opacity","stroke-linecap","stroke-linejoin","fill","fill-opacity","fill-rule"],Defaults:{"stroke-width":1,stroke:"#000000","stroke-opacity":1,"stroke-linecap":"butt","stroke-linejoin":"miter",fill:"none","fill-opacity":1,"fill-rule":"evenodd"}});i.Style=X;var Y=e(null,ut(null,{constructor:function(){var t,n,e=this,r=null;e.id=(n=e.name,dt(n||"")+"_"+dt(++mt)+"_"+dt((new Date).getTime())+"_"+dt(S.round(1e3*S.random()))),t=function(n){r===n&&(e.isChanged()||(e.isChanged(!0),e.triggerChange()))},(r=new X).onChange(t),b(e,"style",{get:function(){return r},set:function(n){n=X(n),r!==n&&(r&&r.onChange(t,!1),(r=n)&&(r.onChange(t),e.isChanged()||(e.isChanged(!0),e.triggerChange())))},enumerable:!0,configurable:!1}),e.setStyle=function(n,t){return arguments.length&&(1<arguments.length?e.style[n]=t:e.style=n),e},e.isChanged(!0)},id:"",name:"Primitive",clone:function(){return this},transform:function(){return this},setStyle:null,getBoundingBox:function(){return{ymin:-1/0,xmin:-1/0,ymax:1/0,xmax:1/0}},getConvexHull:function(){return[]},getCenter:function(){var n=this.getBoundingBox();return{x:(n.xmin+n.xmax)/2,y:(n.ymin+n.ymax)/2}},hasPoint:function(n){return!1},hasInsidePoint:function(n,t){return!1},intersects:function(n){return!1},intersectsSelf:function(){return!1},toSVG:function(n){return arguments.length?n:""},toSVGPath:function(n){return arguments.length?n:""},toCanvas:function(n){},toCanvasPath:function(n){},toTex:function(){return"\\text{Primitive}"},toString:function(){return"Primitive()"}},n)),M=e(i.Primitive=Y,{constructor:function n(t,e){var r=this,i=0,o=0,a=null;return t instanceof n?t:r instanceof n?(r.$super("constructor"),o=wt(t)?(i=vt(t[0]),vt(t[1])):_t(t)?(i=vt(t.x),vt(t.y)):(i=vt(t),vt(e)),b(r,"x",{get:function(){return i},set:function(n){var t=!ot(n=vt(n),i);i=n,t&&!r.isChanged()&&(r.isChanged(!0),r.triggerChange())},enumerable:!0,configurable:!1}),b(r,"y",{get:function(){return o},set:function(n){var t=!ot(n=vt(n),o);o=n,t&&!r.isChanged()&&(r.isChanged(!0),r.triggerChange())},enumerable:!0,configurable:!1}),b(r,"norm",{get:function(){return null==a&&(a=Nn(i,o)),a},enumerable:!0,configurable:!1}),r.isChanged=function(n){return!0===n&&(a=null),r.$super("isChanged",arguments)},void(r.dispose=function(){o=i=null,r.$super("dispose")})):new n(t,e)},name:"Point",clone:function(){return new M(this.x,this.y)},transform:function(n){return n.transform(this)},getBoundingBox:function(){return{ymin:this.y,xmin:this.x,ymax:this.y,xmax:this.x}},eq:function(n){return n instanceof M||null!=n.x&&null!=n.y?on(this,n):!!wt(n)&&on(this,{x:n[0],y:n[1]})},add:function(n){return n instanceof M?new M(this.x+n.x,this.y+n.y):new M(this.x+vt(n),this.y+vt(n))},mul:function(n){return n=vt(n),new M(this.x*n,this.y*n)},dot:function(n){return Hn(this.x,this.y,n.x,n.y)},cross:function(n){return Wn(this.x,this.y,n.x,n.y)},angle:function(n){return Un(this.x,this.y,n.x,n.y)},between:function(n,t){return!!(n instanceof Q?un(this,n.start,n.end):un(this,n,t))},distanceToLine:function(n,t){return n instanceof Q?an(this,n.start,n.end):an(this,n,t)},isOn:function(n){return!!kt(n.hasPoint)&&n.hasPoint(this)},isInside:function(n,t){return!!kt(n.hasInsidePoint)&&n.hasInsidePoint(this,t)},intersects:function(n){return n instanceof M?!!this.eq(n)&&[this]:n instanceof Y&&n.intersects(this)},toObj:function(){return{x:this.x,y:this.y}},bezierPoints:function(){var n=this.x,t=this.y;return[[{x:n,y:t},{x:n,y:t},{x:n,y:t},{x:n,y:t}]]},toSVG:function(n){var t=this;return lt("circle",{id:[t.id,!1],cx:[t.x,t.isChanged()],cy:[t.y,t.isChanged()],r:[t.style["stroke-width"],t.style.isChanged()],style:["fill:"+dt(t.style.stroke)+";",t.style.isChanged()]},!!arguments.length&&n)},toSVGPath:function(n){var t=this,e=t.style["stroke-width"],e="M "+dt(t.x-e)+" "+dt(t.y)+" a "+dt(e)+" "+dt(e)+" 0 0 0 "+dt(e+e)+" 0 a "+dt(e)+" "+dt(e)+" 0 0 0 "+dt(-e-e)+" 0 Z";return arguments.length?lt("path",{id:[t.id,!1],d:[e,t.isChanged()],style:["fill:"+dt(t.style.stroke)+";",t.style.isChanged()]},n):e},toCanvas:function(n){n.fillStyle=this.style.stroke,this.toCanvasPath(n)},toCanvasPath:function(n){n.beginPath(),n.arc(this.x,this.y,this.style["stroke-width"],0,w),n.closePath(),n.fill()},toTex:function(){return"\\begin{pmatrix}"+dt(this.x)+"\\\\"+dt(this.y)+"\\end{pmatrix}"},toString:function(){return"Point("+dt(this.x)+","+dt(this.y)+")"}});i.Point=M;var F=e(Y,{constructor:function n(t){var e,r,i,o,a=this,s=null;return t instanceof n?t:a instanceof n?(null==t&&(t=[]),a.$super("constructor"),i=function(n){return(n=M(n)).onChange(e),n},o=function(n){return n.onChange(e,!1),n},(e=function(n){wt(s)&&-1!==s.indexOf(n)&&(a.isChanged()||(a.isChanged(!0),a.triggerChange()))}).id=a.id,(r=function(){a.isChanged()||(a.isChanged(!0),a.triggerChange())}).id=a.id,(s=ct(t,i,o,on)).onChange(r),void b(a,"points",{get:function(){return s},set:function(n){s!==n&&(wt(s)&&ft(s,o),wt(n)?((s=ct(n,i,o,on)).onChange(r),a.isChanged()||(a.isChanged(!0),a.triggerChange())):null==n&&(s=null))},enumerable:!0,configurable:!0})):new n(t)},name:"Topos",dispose:function(){var t=this;t.points&&(ft(t.points,function(n){return n.onChange(t.id,!1),n}),t.points=null),t.$super("dispose")},isChanged:function(n){return!1===n&&this.points.forEach(function(n){n.isChanged(!1)}),this.$super("isChanged",arguments)},clone:function(){return new F(this.points.map(function(n){return n.clone()}))},transform:function(t){return new F(this.points.map(function(n){return t.transform(n)}))},hasPoint:function(n){for(var t=this.points,e=t.length,r=0;r<e;++r)if(on(t[r],n))return!0;return!1},hasInsidePoint:function(n,t){return this.hasPoint(n)},intersects:function(n){if(n instanceof Y){for(var t=this.points,e=t.length,r=[],i=0;i<e;++i)n.intersects(t[i])&&r.push(t[i]);return!!r.length&&r}return!1},toSVG:function(n){return this.toSVGPath(!!arguments.length&&n)},toSVGPath:function(n){var t=this,e=t.points.map(function(n){return n.toSVGPath()}).join(" ");return arguments.length?lt("path",{id:[t.id,!1],d:[e,t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},n):e},toCanvas:function(n){this.style.toCanvas(n),this.toCanvasPath(n)},toCanvasPath:function(t){this.points.forEach(function(n){n.toCanvasPath(t)})},toTex:function(){return"\\text{Topos}"},toString:function(){return"Topos()"}}),q=e(i.Topos=F,{constructor:function(n,t){var e=this,r=null,i=null,o=null,a=null,s=null,u=null;e.$super("constructor",[n]),null==t&&(t={}),a=t,r=e.hasMatrix()?g.eye():null,a.matrix=new k(0),a.matrix.isChanged(e.hasMatrix()),b(e,"matrix",{get:function(){return r||g.eye()},set:function(n){var t;e.hasMatrix()&&(t=!(n=g(n)).eq(r),r=n,t&&!e.isChanged()&&(a.matrix.isChanged(!0),e.isChanged(!0),e.triggerChange()))},enumerable:!0,configurable:!0}),e.setMatrix=function(n){return arguments.length&&(e.matrix=n),e},b(e,"_points",{get:function(){return null==i&&(i=!r||r.eq(p)?e.points.map(function(n){return n.clone()}):e.points.map(function(n){return r.transform(n)})),i},set:function(n){null==n&&(i=null)},enumerable:!1,configurable:!0}),b(e,"_lines",{get:function(){return null==o&&(o=function(n,t,e,r){null==t&&(t=f);null==e&&(e=h);var i,o=[];if(r)for(o.push(n(0)),i=0;i<t;++i)!function n(t,e,r,i,o,a,s){if(i<=r||ot(r,i))return;var u=(r+i)/2,l=a||e(r),a=s||e(i),s=e(u);an(s,l,a)<=o?t.push(a):(n(t,e,r,u,o,l,s),n(t,e,u,i,o,s,a))}(o,n,0===i?0:i/t,t===i+1?1:(i+1)/t,e);else for(i=0;i<=t;++i)o.push(n(0===i?0:t===i?1:i/t));return o}(e.f.bind(e),f,h,!0)),o},set:function(n){null==n&&(o=null)},enumerable:!1,configurable:!0}),b(e,"values",{get:function(){return a},set:function(n){null==n&&(a=null)},enumerable:!1,configurable:!0}),b(e,"length",{get:function(){return 0},enumerable:!0,configurable:!0}),b(e,"area",{get:function(){return 0},enumerable:!0,configurable:!0}),b(e,"_bbox",{get:function(){return{ymin:-1/0,xmin:-1/0,ymax:1/0,xmax:1/0}},enumerable:!1,configurable:!0}),b(e,"_hull",{get:function(){var n=null,n=null==s?s=e._bbox:e._bbox;return null!=u&&s===n||(u=[new M((s=n).xmin,n.ymin),new M(n.xmax,n.ymin),new M(n.xmax,n.ymax),new M(n.xmin,n.ymax)]),u},enumerable:!1,configurable:!0})},name:"Curve",dispose:function(){this.values=null,this.$super("dispose")},isChanged:function(n){var t=this;return!1===n&&(Object.keys(t.values).forEach(function(n){t.values[n].isChanged(!1)}),t.style.isChanged(!1)),!0===n&&(t._points=null,t._lines=null),t.$super("isChanged",arguments)},isConnected:function(){return!0},isClosed:function(){return!1},isConvex:function(){return!1},hasMatrix:function(){return!0},setMatrix:null,f:function(n){return{x:0,y:0}},d:function(){return this.clone()},getPointAt:function(n){if((n=vt(n))<0||1<n)return null;n=this.f(n);return null==n?null:M(n)},getBoundingBox:function(){var n=this._bbox;return{ymin:n.ymin,xmin:n.xmin,ymax:n.ymax,xmax:n.xmax}},getConvexHull:function(){return this._hull.map(function(n){return n.clone()})},derivative:function(){var n=this.d();return this.hasMatrix()&&n.setMatrix(this.matrix.clone()),n.setStyle(this.style.toObj()),n},polylinePoints:function(){return this._lines.slice()},bezierPoints:function(){return[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]},toTex:function(){return"\\text{Curve}"},toString:function(){return"Curve()"}}),n=e(i.Curve=q,{constructor:function(n,t){var e=this;null==n&&(n=[]),e.$super("constructor",[n,t]),b(e,"degree",{get:function(){return e.points.length-1},enumerable:!0,configurable:!1})},name:"Bezier",d:function(){var n=this.points,t=n.length-1,n=this instanceof Bezier1?new Bezier1([{x:t*(n[1].x-n[0].x),y:t*(n[1].y-n[0].y)},{x:t*(n[1].x-n[0].x),y:t*(n[1].y-n[0].y)}]):this instanceof Bezier2?new Bezier1([{x:t*(n[1].x-n[0].x),y:t*(n[1].y-n[0].y)},{x:t*(n[2].x-n[1].x),y:t*(n[2].y-n[1].y)}]):this instanceof Bezier3?new Bezier2([{x:t*(n[1].x-n[0].x),y:t*(n[1].y-n[0].y)},{x:t*(n[2].x-n[1].x),y:t*(n[2].y-n[1].y)},{x:t*(n[3].x-n[2].x),y:t*(n[3].y-n[2].y)}]):new Bezier1([{x:0,y:0},{x:0,y:0}]);return n},toTex:function(){return"\\text{"+this.name+": }\\left("+this.points.map(bt).join(",")+"\\right)"},toString:function(){return this.name+"("+this.points.map(dt).join(",")+")"}});i.Bezier=n;var O=/[M]/g,I=/^\s*(-?\s*\d+(?:\.\d+)?)\s+(-?\s*\d+(?:\.\d+)?)/,L=/(-?\s*\d+(?:\.\d+)?)\s+(-?\s*\d+(?:\.\d+)?)\s*$/,R=e(q,{constructor:function n(t){var e,r,i,o,a=this,s=null,u=null,l=null,c=null,f=null;if(!(a instanceof n))return new n(t);null==t&&(t=[]),Y.call(a),i=function(n){return n instanceof q&&n.onChange(e),n},o=function(n){return n instanceof q&&n.onChange(e,!1),n},(e=function(n){wt(s)&&-1!==s.indexOf(n)&&(a.isChanged()||(a.isChanged(!0),a.triggerChange()))}).id=a.id,(r=function(){a.isChanged()||(a.isChanged(!0),a.triggerChange())}).id=a.id,(s=ct(t,i,o)).onChange(r),b(a,"points",{get:function(){return null==u&&(u=s.reduce(function(n,t){return n.push.apply(n,t.points),n},[])),u},set:function(n){null==n&&(u=null)},enumerable:!0,configurable:!1}),b(a,"curves",{get:function(){return s},set:function(n){s!==n&&(wt(s)&&ft(s,o),wt(n)?((s=ct(n,i,o)).onChange(r),a.isChanged()||(a.isChanged(!0),a.triggerChange())):null==n&&(s=null))},enumerable:!0,configurable:!1}),b(a,"length",{get:function(){return null==l&&(l=s.reduce(function(n,t){return n+=t.length},0)),l},enumerable:!0,configurable:!1}),b(a,"area",{get:function(){return 0},enumerable:!0,configurable:!1}),b(a,"_bbox",{get:function(){return null==c&&(c=s.reduce(function(n,t){t=t.getBoundingBox();return n.ymin=S.min(n.ymin,t.ymin),n.xmin=S.min(n.xmin,t.xmin),n.ymax=S.max(n.ymax,t.ymax),n.xmax=S.max(n.xmax,t.xmax),n},{ymin:1/0,xmin:1/0,ymax:-1/0,xmax:-1/0})),c},enumerable:!1,configurable:!1}),b(a,"_hull",{get:function(){return null==f&&(f=Sn(s.reduce(function(n,t){return n.push.apply(n,t._hull),n},[]))),f},enumerable:!1,configurable:!1}),a.isChanged=function(n){return!0===n&&(_area=l=u=null,f=c=null),Y.prototype.isChanged.apply(a,arguments)}},name:"CompositeCurve",dispose:function(){var t=this;t.curves&&(ft(t.curves,function(n){return n instanceof q&&n.onChange(t.id,!1),n}),t.curves=null,t.points=null),Y.prototype.dispose.call(t)},clone:function(){return new R(this.curves.map(function(n){return n.clone()}))},transform:function(t){return new R(this.curves.map(function(n){return n.transform(t)}))},isConnected:function(){var n,t,e,r=this.curves,i=r.length-1;if(i<0)return!1;if(!r[0].isConnected())return!1;for(e=0;e<i;++e){if(n=r[e],!(t=r[e+1]).isConnected()||t.isClosed())return!1;if(n=n._points,t=t._points,!n[n.length-1].eq(t[0]))return!1}return!0},isClosed:function(n){if(!(n=!0===n||!1===n?n:this.isConnected()))return!1;var t=this.curves,n=t.length;return!!n&&(!(1!==n||!t[0].isClosed())||t[0]._points[0].eq(t[n-1]._points[t[n-1]._points.length-1]))},f:function(n){var t=this.curves,e=t.length-1,r=S.floor(n*e);return 1===n?t[e].f(n):t[r].f(e*(n-r/e))},derivative:function(){return new R(this.curves.map(function(n){return n.derivative()}))},hasPoint:function(n){for(var t=this.curves,e=t.length,r=0;r<e;++r)if(t[r].hasPoint(n))return!0;return!1},intersects:function(n){if(n instanceof M)return!!this.hasPoint(n)&&[n];if(n instanceof Y){for(var t,e=[],r=this.curves,i=r.length,o=0;o<i;++o)(t=r[o].intersects(n))&&e.push.apply(e,t);return!!e&&e.map(M)}return!1},intersectsSelf:function(){for(var n,t,e,r,i,o,a=[],s=this.curves,u=s.length,l=0;l<u;++l)for((n=s[l].intersectsSelf())&&a.push.apply(a,n),t=l+1;t<u;++t)(n=s[l].intersects(s[t]))&&(e=s[l]._points[0],r=s[l]._points[s[l]._points.length-1],i=s[t]._points[0],o=s[t]._points[s[t]._points.length-1],0===l&&t===u-1&&on(e,o)?n=n.filter(function(n){return!on(n,e)}):t===l+1&&on(r,i)&&(n=n.filter(function(n){return!on(n,r)})),a.push.apply(a,n));return!!a&&a.map(M)},polylinePoints:function(){return this.curves.reduce(function(n,t){return n.push.apply(n,t.polylinePoints()),n},[])},bezierPoints:function(){return this.curves.reduce(function(n,t){return n.push.apply(n,t.bezierPoints()),n},[])},toSVG:function(n){return this.toSVGPath(!!arguments.length&&n)},toSVGPath:function(n){var i,t=this,e=t.curves,r=t.isConnected(),o=t.isClosed(r),a=e.map(function(n){return n.toSVGPath()}).join(" ");return r&&(r=a.match(O),i=a.split(O),a=r.reduce(function(n,t,e){var r;return"M"===t&&(t=(r=i[e+1]||"").match(I),e=(i[e]||"").match(L),r=t&&e&&ot(vt(t[1]),vt(e[1]))&&ot(vt(t[2]),vt(e[2]))?(n=gt(n),r.slice(t[0].length)):"M"+r,n+=r),n},i[0]||"")+(o&&1<e.length?" Z":"")),arguments.length?lt("path",{id:[t.id,!1],d:[a,t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},n):a},toCanvas:function(n){this.style.toCanvas(n),this.toCanvasPath(n),"none"!==this.style.fill&&n.fill(),n.stroke()},toCanvasPath:function(n){var t,e,r,i,o,a,s=this.curves,u=s.length;if(u){for(e=this.isConnected(),r=this.isClosed(e),n.beginPath(),e&&(n.moveTo(s[0]._points[0].x,s[0]._points[0].y),i=n.moveTo,o=n.beginPath,a=n.closePath,n.moveTo=y,n.beginPath=y,n.closePath=y),t=0;t<u;++t)s[t].toCanvasPath(n);e&&(n.moveTo=i,n.beginPath=o,n.closePath=a,r&&n.closePath())}},toTex:function(){return"\\text{CompositeCurve: }\\begin{cases}&"+this.curves.map(bt).join("\\\\&")+"\\end{cases}"},toString:function(){return"CompositeCurve(\n"+this.curves.map(dt).join("\n")+"\n)"}});i.CompositeCurve=R;var Q=e(n,{constructor:function n(t,e){var o=this,r=null,a=null;return t instanceof n?t:o instanceof n?(wt(t)&&null==e&&(e=t[1],t=t[0]),o.$super("constructor",[[t,e]]),b(o,"start",{get:function(){return o.points[0]},set:function(n){o.points[0]=n},enumerable:!0,configurable:!1}),b(o,"end",{get:function(){return o.points[1]},set:function(n){o.points[1]=n},enumerable:!0,configurable:!1}),b(o,"_lines",{get:function(){return o._points},set:function(n){},enumerable:!1,configurable:!1}),b(o,"length",{get:function(){var n;return null==r&&(n=o._points,r=Zn(n[0],n[1])),r},enumerable:!0,configurable:!1}),b(o,"_bbox",{get:function(){var n,t,e,r,i;return null==a&&(n=(r=o._points)[0],i=r[1],t=S.min(n.x,i.x),e=S.max(n.x,i.x),r=S.min(n.y,i.y),i=S.max(n.y,i.y),a={ymin:r,xmin:t,ymax:i,xmax:e}),a},enumerable:!1,configurable:!1}),void(o.isChanged=function(n){return!0===n&&(a=r=null),o.$super("isChanged",arguments)})):new n(t,e)},name:"Line",clone:function(){return new Q(this.start.clone(),this.end.clone())},transform:function(n){return new Q(this.start.transform(n),this.end.transform(n))},hasPoint:function(n){var t=this._points;return!!un(n,t[0],t[1])},intersects:function(n){var t,e,r=this;return n instanceof M?!!(t=un(n,(e=r._points)[0],e[1]))&&[n]:n instanceof Q?!!(t=yn((e=r._points)[0],e[1],n._points[0],n._points[1]))&&[M(t)]:i.Circle&&n instanceof i.Circle?!!(t=gn((e=r._points)[0],e[1],n.center,n.radius))&&t.map(M):i.Ellipse&&n instanceof i.Ellipse?!!(t=xn((e=r._points)[0],e[1],n.center,n.radiusX,n.radiusY,n.cs))&&t.map(M):i.Arc&&n instanceof i.Arc?!!(t=pn((e=r._points)[0],e[1],null,n.center,n.rX,n.rY,n.cs,n.theta,n.dtheta))&&t.map(M):i.QBezier&&n instanceof i.QBezier?!!(t=mn((e=r._points)[0],e[1],null,n._points))&&t.map(M):i.CBezier&&n instanceof i.CBezier?!!(t=dn((e=r._points)[0],e[1],null,n._points))&&t.map(M):n instanceof Y&&n.intersects(this)},f:function(n){return Fn(n,this._points)},distanceToPoint:function(n){return sn(n,this._points[0],this._points[1])},bezierPoints:function(){var n=this._points;return[[Fn(0,n),Fn(.5,n),Fn(.5,n),Fn(1,n)]]},toSVG:function(n){var t=this,e=t._points;return lt("line",{id:[t.id,!1],x1:[e[0].x,t.start.isChanged()||t.values.matrix.isChanged()],y1:[e[0].y,t.start.isChanged()||t.values.matrix.isChanged()],x2:[e[1].x,t.end.isChanged()||t.values.matrix.isChanged()],y2:[e[1].y,t.end.isChanged()||t.values.matrix.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},!!arguments.length&&n)},toSVGPath:function(n){var t=this,e=t._points,e=["M",e[0].x,e[0].y,"L",e[1].x,e[1].y].join(" ");return arguments.length?lt("path",{id:[t.id,!1],d:[e,t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},n):e},toCanvas:function(n){this.style.toCanvas(n),this.toCanvasPath(n),n.stroke()},toCanvasPath:function(n){var t=this._points[0],e=this._points[1];n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y)},toTex:function(){var n=this.start,t=this.end;return"\\text{Line: }"+pt(t.y-n.y,!1)+" \\cdot x "+pt(n.x-t.x)+" \\cdot y "+pt(t.x*n.y-n.x*t.y)+" = 0\\text{, }"+dt(S.min(n.x,t.x))+" \\le x \\le "+dt(S.max(n.x,t.x))+"\\text{, }"+dt(S.min(n.y,t.y))+" \\le y \\le "+dt(S.max(n.y,t.y))},toString:function(){return"Line("+[dt(this.start),dt(this.end)].join(",")+")"}});i.Line=Q;var N=e(q,{constructor:function n(t){var i=this,e=null,r=null,o=null,a=null;return t instanceof n?t:i instanceof n?(i.$super("constructor",[t]),b(i,"lines",{get:function(){var r=i.points;return 1<r.length?r.reduce(function(n,t,e){return e+1<r.length&&(n[e]=new Q(t,r[e+1])),n},new Array(r.length-1)):[]},enumerable:!0,configurable:!1}),b(i,"_lines",{get:function(){return i._points},enumerable:!1,configurable:!1}),b(i,"length",{get:function(){return null==e&&(e=Pn(i._points)),e},enumerable:!0,configurable:!1}),b(i,"_bbox",{get:function(){if(null==r){r={ymin:1/0,xmin:1/0,ymax:-1/0,xmax:-1/0};for(var n=0,t=i._points,e=t.length;n<e;++n)r.ymin=S.min(r.ymin,t[n].y),r.ymax=S.max(r.ymax,t[n].y),r.xmin=S.min(r.xmin,t[n].x),r.xmax=S.max(r.xmax,t[n].x)}return r},enumerable:!1,configurable:!1}),b(i,"_hull",{get:function(){return null==o&&(o=Sn(i._points).map(M)),o},enumerable:!1,configurable:!1}),b(i,"_is_convex",{get:function(){return!!i.isClosed()&&(null==a&&(a=Gn(i._points)),a)},enumerable:!1,configurable:!1}),void(i.isChanged=function(n){return!0===n&&(a=o=r=e=null),i.$super("isChanged",arguments)})):new n(t)},name:"Polyline",clone:function(){return new N(this.points.map(function(n){return n.clone()}))},transform:function(t){return new N(this.points.map(function(n){return n.transform(t)}))},isClosed:function(){var n=this.points;return 2<n.length&&n[0].eq(n[n.length-1])},isConvex:function(){return this._is_convex},hasPoint:function(n){return function(n,t){for(var e=0,r=t.length-1;e<r;++e)if(un(n,t[e],t[e+1]))return!0;return!1}(n,this._points)},hasInsidePoint:function(n,t){if(!this.isClosed())return!1;n=hn(n,{x:this._bbox.xmax+10,y:n.y},this._points);return t?1===n:0<n},f:function(n){var t=this._points,e=t.length-1,r=S.floor(n*e);return 1===n?{x:t[e].x,y:t[e].y}:Fn(e*(n-r/e),[t[r],t[r+1]])},intersects:function(n){var t,e=this;return n instanceof M?!!e.hasPoint(n)&&[n]:n instanceof Q?!!(t=vn(e._points,n._points[0],n._points[1]))&&t.map(M):i.Circle&&n instanceof i.Circle?!!(t=bn(e._points,n.center,n.radius))&&t.map(M):i.Ellipse&&n instanceof i.Ellipse?!!(t=Cn(e._points,n.center,n.radiusX,n.radiusY,n.cs))&&t.map(M):i.Arc&&n instanceof i.Arc?!!(t=$n(e._points,n.center,n.rX,n.rY,n.cs,n.theta,n.dtheta))&&t.map(M):i.QBezier&&n instanceof i.QBezier?!!(t=wn(e._points,n._points))&&t.map(M):i.CBezier&&n instanceof i.CBezier?!!(t=_n(e._points,n._points))&&t.map(M):n instanceof N?!!(t=kn(e._points,n._points))&&t.map(M):n instanceof Y&&n.intersects(e)},intersectsSelf:function(){for(var n,t,e,r,i,o,a=[],s=this._points,u=s.length,l=0;l<u&&!(u<=l+1);++l)for(t=l+2;t<u&&!(u<=t+1);++t)e=s[l],r=s[l+1],i=s[t],o=s[t+1],(n=yn(e,r,i,o))&&(0===l&&t===u-2&&on(e,o)?n=n.filter(function(n){return!on(n,e)}):t===l+2&&on(r,i)&&(n=n.filter(function(n){return!on(n,r)})),a.push.apply(a,n));return!!a&&a.map(M)},distanceToPoint:function(r){var i=this.points;return i.length?1===i.length?Nn(r.x-i[0].x,r.y-i[0].y):i.reduce(function(n,t,e){return e+1<i.length&&(n=S.min(n,sn(r,i[e],i[e+1]))),n},1/0):NaN},bezierPoints:function(){var r=this._points,i=r.length;return r.reduce(function(n,t,e){return e+1<i&&(e=[r[e],r[e+1]],n.push([Fn(0,e),Fn(.5,e),Fn(.5,e),Fn(1,e)])),n},[])},toSVG:function(n){var t=this;return lt("polyline",{id:[t.id,!1],points:[t._points.map(function(n){return dt(n.x)+" "+dt(n.y)}).join(" "),t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},!!arguments.length&&n)},toSVGPath:function(n){var t=this,e="M "+t._points.map(function(n){return dt(n.x)+" "+dt(n.y)}).join(" L ")+(t.isClosed()?" Z":"");return arguments.length?lt("path",{id:[t.id,!1],d:[e,t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},n):e},toCanvas:function(n){this.style.toCanvas(n),elf.toCanvasPath(n),this.isClosed()&&"none"!==this.style.fill&&n.fill(),n.stroke()},toCanvasPath:function(n){var t,e=this._points,r=e.length;for(n.beginPath(),n.moveTo(e[0].x,e[0].y),t=1;t<r;++t)n.lineTo(e[t].x,e[t].y);this.isClosed()&&n.closePath()},toTex:function(){return"\\text{Polyline: }\\begin{cases}&"+this.lines.map(bt).join("\\\\&")+"\\end{cases}"},toString:function(){return"Polyline("+this.points.map(dt).join(",")+")"}});i.Polyline=N;var Z=e(q,{constructor:function n(t,e,r,i,o,a,s){var u,l=this,c=null,f=null,h=null,y=null,g=null,x=0,p=0,m=null,d=null,v=null;return t instanceof n?t:l instanceof n?(c=new k(S.abs(vt(r))),f=new k(S.abs(vt(i))),h=new k(o),x=S.cos(et(h.val())),p=S.sin(et(h.val())),y=new k(a?1:0),g=new k(s?1:0),l.$super("constructor",[[t,e],{radiusX:c,radiusY:f,angle:h,largeArc:y,sweep:g}]),b(l,"start",{get:function(){return l.points[0]},set:function(n){l.points[0]=n},enumerable:!0,configurable:!1}),b(l,"end",{get:function(){return l.points[1]},set:function(n){l.points[1]=n},enumerable:!0,configurable:!1}),b(l,"radiusX",{get:function(){return c.val()},set:function(n){c.val(S.abs(vt(n))),c.isChanged()&&!l.isChanged()&&(l.isChanged(!0),l.triggerChange())},enumerable:!0,configurable:!1}),b(l,"radiusY",{get:function(){return f.val()},set:function(n){f.val(S.abs(vt(n))),f.isChanged()&&!l.isChanged()&&(l.isChanged(!0),l.triggerChange())},enumerable:!0,configurable:!1}),b(l,"angle",{get:function(){return h.val()},set:function(n){h.val(n),x=S.cos(et(h.val())),p=S.sin(et(h.val())),h.isChanged()&&!l.isChanged()&&(l.isChanged(!0),l.triggerChange())},enumerable:!0,configurable:!1}),b(l,"largeArc",{get:function(){return y.val()},set:function(n){y.val(n?1:0),y.isChanged()&&!l.isChanged()&&(l.isChanged(!0),l.triggerChange())},enumerable:!0,configurable:!1}),b(l,"sweep",{get:function(){return g.val()},set:function(n){g.val(n?1:0),g.isChanged()&&!l.isChanged()&&(l.isChanged(!0),l.triggerChange())},enumerable:!0,configurable:!1}),b(l,"center",{get:function(){return l._params[0]},enumerable:!1,configurable:!1}),b(l,"theta",{get:function(){return l._params[1]},enumerable:!1,configurable:!1}),b(l,"dtheta",{get:function(){return l._params[2]},enumerable:!1,configurable:!1}),b(l,"rX",{get:function(){return l._params[3]},enumerable:!1,configurable:!1}),b(l,"rY",{get:function(){return l._params[4]},enumerable:!1,configurable:!1}),b(l,"cs",{get:function(){return[x,p]},enumerable:!1,configurable:!1}),b(l,"_params",{get:function(){return null==m&&(m=function(n,t,e,r,i,o,a,s,u){var l=u[0],c=u[1],f=l*(n-e)/2+c*(t-r)/2,h=-c*(n-e)/2+l*(t-r)/2,y=f*f,g=h*h,x=a*a,p=s*s,u=y/x+g/p;1<u&&(u=C(u),x=(a*=u)*a,p=(s*=u)*s);y=C(G((x*p-x*g-p*y)/(x*g+p*y)))*(i===o?-1:1),i=y*a*h/s,y=-y*s*f/a,e=l*i-c*y+(n+e)/2,t=c*i+l*y+(t+r)/2,r=Jn(1,0,(f-i)/a,(h-y)/s),y=Jn((f-i)/a,(h-y)/s,(-f-i)/a,(-h-y)/s);y-=S.floor(y/w)*w,!o&&0<y&&(y-=w);o&&y<0&&(y+=w);return[{x:e,y:t},r,y,a,s]}(l.start.x,l.start.y,l.end.x,l.end.y,l.largeArc,l.sweep,l.radiusX,l.radiusY,l.cs)),m},enumerable:!1,configurable:!1}),b(l,"length",{get:function(){return null==d&&(d=Pn(l._lines)),d},enumerable:!0,configurable:!1}),b(l,"_bbox",{get:function(){return null==v&&(v=u(l.start,l.end,l.center.x,l.center.y,l.rX,l.rY,l.theta,l.dtheta,l.angle,l.sweep)),v},enumerable:!(u=function(n,t,e,r,i,o,a,s,u,l){var c,f,h,y=a+s,g=!1,s=S.tan(et(u));return l||(c=a,a=y,y=c),y<a&&(c=a,a=y,y=c,g=!0),(c=S.atan2(-o*s,i))<0&&(c+=w),u=In(c,e,r,i,o,x,p),l=In(c+=$,e,r,i,o,x,p),(c=S.atan2(o,i*s))<0&&(c+=w),s=In(c,e,r,i,o,x,p),i=In(c+=$,e,r,i,o,x,p),o=l.x<u.x?(f=l,u):(f=u,l),u=s.y<i.y?(h=s,i):(h=i,s),l=Jn(1,0,f.x-e,f.y-r),i=Jn(1,0,o.x-e,o.y-r),s=Jn(1,0,h.x-e,h.y-r),r=Jn(1,0,u.x-e,u.y-r),l<0&&(l+=w),w<l&&(l-=w),i<0&&(i+=w),w<i&&(i-=w),s<0&&(s+=w),w<s&&(s-=w),r<0&&(r+=w),w<r&&(r-=w),(!g&&(l<a||y<l)||g&&!(l<a||y<l))&&(f=n.x<t.x?n:t),(!g&&(i<a||y<i)||g&&!(i<a||y<i))&&(o=n.x>t.x?n:t),(!g&&(s<a||y<s)||g&&!(s<a||y<s))&&(h=n.y<t.y?n:t),(!g&&(r<a||y<r)||g&&!(r<a||y<r))&&(u=n.y>t.y?n:t),{ymin:h.y,xmin:f.x,ymax:u.y,xmax:o.x}}),configurable:!1}),void(l.isChanged=function(n){return!0===n&&(v=d=m=null),l.$super("isChanged",arguments)})):new n(t,e,r,i,o,a,s)},name:"Arc",clone:function(){var n=this;return new Z(n.start.clone(),n.end.clone(),n.radiusX,n.radiusY,n.angle,n.largeArc,n.sweep)},transform:function(n){var t=this,e=t.radiusX,r=t.radiusY,i=t.angle,o=tt(n.getRotationAngle()),a=n.getScale();return new Z(t.start.transform(n),t.end.transform(n),e*a.x,r*a.y,i+o,t.largeArc,t.sweep)},isClosed:function(){return!1},isConvex:function(){return!1},hasMatrix:function(){return!1},f:function(n){var t=this,e=t.center,r=t.cs;return In(t.theta+n*t.dtheta,e.x,e.y,t.rX,t.rY,r[0],r[1])},d:function(){var n,t,e,r,i,o,a,s=this,a=(n=s.center.x,t=s.center.y,e=s.rY,r=s.rX,i=[s.cs[0],-s.cs[1]],o=-s.theta,a=-s.dtheta,{p0:In(o,n,t,e,r,i[0],i[1]),p1:In(o+a,n,t,e,r,i[0],i[1]),fa:G(a)>$,fs:0<G(a)});return new Z(a.p0,a.p1,-s.angle,a.fa,a.fs)},hasPoint:function(n){var t=this;return ln(n,t.center,t.rX,t.rY,t.cs,t.theta,t.dtheta)},hasInsidePoint:function(n,t){return!t&&this.hasPoint(n)},intersects:function(n){var t,e=this;return n instanceof M?!!e.hasPoint(n)&&[n]:i.Circle&&n instanceof i.Circle?!!(t=bn(e._lines,n.center,n.radius))&&t.map(M):i.Ellipse&&n instanceof i.Ellipse?!!(t=Cn(e._lines,n.center,n.radiusX,n.radiusY,n.cs))&&t.map(M):n instanceof Z?!!(t=$n(e._lines,n.center,n.rX,n.rY,n.cs,n.theta,n.dtheta))&&t.map(M):n instanceof Y&&n.intersects(e)},bezierPoints:function(){var n,t,e,r=this,i=r.center,o=i.x,a=i.y,s=r.rX,u=r.rY,i=r.cs,l=i[0],c=i[1],f=r.theta,h=r.dtheta,r=2*G(h)/$;for(ot(r,1)&&(r=1),ot(r,S.floor(r))&&(r=S.floor(r)),h/=t=S.max(1,S.ceil(r)),e=new Array(t),n=0;n<t;++n,f+=h)e[n]=Rn(f,h,o,a,s,u,l,c);return e},toSVG:function(n){return this.toSVGPath(!!arguments.length&&n)},toSVGPath:function(n){var t=this,e=t.start,r=t.end,i=t.radiusX,o=t.radiusY,a=t.angle,s=t.largeArc?1:0,u=t.sweep?1:0,r=["M",e.x,e.y,"A",i,o,a,s,u,r.x,r.y].join(" ");return arguments.length?lt("path",{id:[t.id,!1],d:[r,t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},n):r},toCanvas:function(n){this.style.toCanvas(n),this.toCanvasPath(n),n.stroke()},toCanvasPath:function(n){var t=this,e=t.center,r=t.rX,i=t.rY,o=!t.sweep,a=et(t.angle),s=t.theta,t=t.dtheta;n.beginPath(),n.ellipse(e.x,e.y,r,i,a,s,s+t,o),G(t)+u>=w&&n.closePath()},toTex:function(){var n=this;return"\\text{Arc: }\\left("+[bt(n.start),bt(n.end),dt(n.radiusX),dt(n.radiusY),dt(n.angle)+"\\text{°}",dt(n.largeArc?1:0),dt(n.sweep?1:0)].join(",")+"\\right)"},toString:function(){var n=this;return"Arc("+[dt(n.start),dt(n.end),dt(n.radiusX),dt(n.radiusY),dt(n.angle)+"°",dt(n.largeArc),dt(n.sweep)].join(",")+")"}});i.Arc=Z;var D=e(n,{constructor:function n(t){var r,i=this,e=null,o=null,a=null;return t instanceof n?t:i instanceof n?(i.$super("constructor",[t]),b(i,"length",{get:function(){return null==e&&(e=Pn(i._lines)),e},enumerable:!0,configurable:!1}),b(i,"_bbox",{get:function(){return null==o&&(o=r(i._points)),o},enumerable:!(r=function(t){var n=An(t[0].x-2*t[1].x+t[2].x,t[1].x-t[0].x),e=!1===n?[t[1]]:n.map(function(n){return 0<=n&&n<=1?qn(n,t):t[1]}),r=An(t[0].y-2*t[1].y+t[2].y,t[1].y-t[0].y),n=!1===r?[t[1]]:r.map(function(n){return 0<=n&&n<=1?qn(n,t):t[1]}),r=S.min.apply(S,e.concat([t[0],t[2]]).map(at)),e=S.max.apply(S,e.concat([t[0],t[2]]).map(at));return{ymin:S.min.apply(S,n.concat([t[0],t[2]]).map(st)),xmin:r,ymax:S.max.apply(S,n.concat([t[0],t[2]]).map(st)),xmax:e}}),configurable:!1}),b(i,"_hull",{get:function(){var t,n,e;return null==a&&(n=Qn(e=i._points),t=g.rotate(n.R).mul(g.translate(n.Tx,n.Ty)),n=r(e.map(function(n){return t.transform(n,{x:0,y:0})})),e=t.inv(),a=[e.transform(new M(n.xmin,n.ymin)),e.transform(new M(n.xmax,n.ymin)),e.transform(new M(n.xmax,n.ymax)),e.transform(new M(n.xmin,n.ymax))]),a},enumerable:!1,configurable:!1}),void(i.isChanged=function(n){return!0===n&&(a=o=e=null),i.$super("isChanged",arguments)})):new n(t)},name:"QBezier",clone:function(){return new D(this.points.map(function(n){return n.clone()}))},transform:function(t){return new D(this.points.map(function(n){return n.transform(t)}))},hasPoint:function(n){return function(n,t){var e;if(!(e=Tn(t[0].x-2*t[1].x+t[2].x,-2*t[0].x+2*t[1].x,t[0].x-n.x)))return!1;1<e.length&&(e[1]<0||1<e[1])&&e.pop();e.length&&(e[0]<0||1<e[0])&&e.shift();if(!e.length)return!1;if(!(n=Tn(t[0].y-2*t[1].y+t[2].y,-2*t[0].y+2*t[1].y,t[0].y-n.y)))return!1;1<n.length&&(n[1]<0||1<n[1])&&n.pop();n.length&&(n[0]<0||1<n[0])&&n.shift();if(!n.length)return!1;{if(1<e.length&&1<n.length)return ot(e[0],n[0])&&ot(e[1],n[1])||ot(e[0],n[1])&&ot(e[1],n[0]);if(1<e.length&&1===n.length)return ot(e[0],n[0])||ot(e[1],n[0]);if(1<n.length&&1===e.length)return ot(n[0],e[0])||ot(n[1],e[0])}return ot(e[0],n[0])}(n,this._points)},intersects:function(n){var t,e=this;return n instanceof M?!!e.hasPoint(n)&&[n]:i.Circle&&n instanceof i.Circle?!!(t=bn(e._lines,n.center,n.radius))&&t.map(M):i.Ellipse&&n instanceof i.Ellipse?!!(t=Cn(e._lines,n.center,n.radiusX,n.radiusY,n.cs))&&t.map(M):i.Arc&&n instanceof i.Arc?!!(t=$n(e._lines,n.center,n.rX,n.rY,n.cs,n.theta,n.dtheta))&&t.map(M):n instanceof D?!!(t=wn(e._lines,n._points))&&t.map(M):n instanceof Y&&n.intersects(e)},f:function(n){return qn(n,this._points)},bezierPoints:function(){var n=this._points;return[[{x:n[0].x,y:n[0].y},{x:n[0].x+2*(n[1].x-n[0].x)/3,y:n[0].y+2*(n[1].y-n[0].y)/3},{x:n[2].x+2*(n[1].x-n[2].x)/3,y:n[2].y+2*(n[1].y-n[2].y)/3},{x:n[2].x,y:n[2].y}]]},toSVG:function(n){return this.toSVGPath(!!arguments.length&&n)},toSVGPath:function(n){var t=this,e=t._points,e=["M",e[0].x,e[0].y,"Q",e[1].x,e[1].y,e[2].x,e[2].y].join(" ");return arguments.length?lt("path",{id:[t.id,!1],d:[e,t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},n):e},toCanvas:function(n){this.style.toCanvas(n),this.toCanvasPath(n),n.stroke()},toCanvasPath:function(n){var t=this._points;n.beginPath(),n.moveTo(t[0].x,t[0].y),n.quadraticCurveTo(t[1].x,t[1].y,t[2].x,t[2].y)}});i.QBezier=D;var H=e(n,{constructor:function n(t){var r,i=this,e=null,o=null,a=null;return t instanceof n?t:i instanceof n?(i.$super("constructor",[t]),b(i,"length",{get:function(){return null==e&&(e=Pn(i._lines)),e},enumerable:!0,configurable:!1}),b(i,"_bbox",{get:function(){return null==o&&(o=r(i._points)),o},enumerable:!(r=function(e){var n=Tn(3*(-e[0].x+3*e[1].x-3*e[2].x+e[3].x),2*(3*e[0].x-6*e[1].x+3*e[2].x),-3*e[0].x+3*e[1].x),t=!1===n?[e[1],e[2]]:n.map(function(n,t){return 0<=n&&n<=1?On(n,e):e[t+1]}),r=Tn(3*(-e[0].y+3*e[1].y-3*e[2].y+e[3].y),2*(3*e[0].y-6*e[1].y+3*e[2].y),-3*e[0].y+3*e[1].y),n=!1===r?[e[1],e[2]]:r.map(function(n,t){return 0<=n&&n<=1?On(n,e):e[t+1]}),r=S.min.apply(S,t.concat([e[0],e[3]]).map(at)),t=S.max.apply(S,t.concat([e[0],e[3]]).map(at));return{ymin:S.min.apply(S,n.concat([e[0],e[3]]).map(st)),xmin:r,ymax:S.max.apply(S,n.concat([e[0],e[3]]).map(st)),xmax:t}}),configurable:!1}),b(i,"_hull",{get:function(){var t,n,e;return null==a&&(n=Qn(e=i._points),t=g.rotate(n.R).mul(g.translate(n.Tx,n.Ty)),n=r(e.map(function(n){return t.transform(n,{x:0,y:0})})),e=t.inv(),a=[e.transform(new M(n.xmin,n.ymin)),e.transform(new M(n.xmax,n.ymin)),e.transform(new M(n.xmax,n.ymax)),e.transform(new M(n.xmin,n.ymax))]),a},enumerable:!1,configurable:!1}),void(i.isChanged=function(n){return!0===n&&(a=o=e=null),i.$super("isChanged",arguments)})):new n(t)},name:"CBezier",clone:function(){return new H(this.points.map(function(n){return n.clone()}))},transform:function(t){return new H(this.points.map(function(n){return n.transform(t)}))},hasPoint:function(n){return function(n,t){var e;if(!(e=jn(-t[0].x+3*t[1].x-3*t[2].x+t[3].x,3*t[0].x-6*t[1].x+3*t[2].x,-3*t[0].x+3*t[1].x,t[0].x-n.x)))return!1;2<e.length&&(e[2]<0||1<e[2])&&e.pop();1<e.length&&(e[1]<0||1<e[1])&&e.splice(1,1);e.length&&(e[0]<0||1<e[0])&&e.shift();if(!e.length)return!1;if(!(n=jn(-t[0].y+3*t[1].y-3*t[2].y+t[3].y,3*t[0].y-6*t[1].y+3*t[2].y,-3*t[0].y+3*t[1].y,t[0].y-n.y)))return!1;2<n.length&&(n[2]<0||1<n[2])&&n.pop();1<n.length&&(n[1]<0||1<n[1])&&n.splice(1,1);n.length&&(n[0]<0||1<n[0])&&n.shift();if(!n.length)return!1;{if(2<e.length&&2<n.length)return ot(e[0],n[0])&&(ot(e[1],n[1])&&ot(e[2],n[2])||ot(e[1],n[2])&&ot(e[2],n[1]))||ot(e[1],n[1])&&ot(e[0],n[2])&&ot(e[2],n[0])||ot(e[2],n[2])&&ot(e[0],n[1])&&ot(e[1],n[0])||ot(e[0],n[1])&&ot(e[1],n[2])&&ot(e[2],n[0])||ot(e[0],n[2])&&ot(e[1],n[0])&&ot(e[2],n[1]);if(2<e.length&&1<n.length)return ot(e[0],n[0])&&(ot(e[1],n[1])||ot(e[2],n[1]))||ot(e[1],n[1])&&(ot(e[0],n[0])||ot(e[2],n[0]))||ot(e[2],n[0])&&(ot(e[1],n[1])||ot(e[0],n[1]))||ot(e[1],n[0])&&(ot(e[2],n[1])||ot(e[0],n[1]));if(1<e.length&&2<n.length)return ot(n[0],e[0])&&(ot(n[1],e[1])||ot(n[2],e[1]))||ot(n[1],e[1])&&(ot(n[0],e[0])||ot(n[2],e[0]))||ot(n[2],e[0])&&(ot(n[1],e[1])||ot(n[0],e[1]))||ot(n[1],e[0])&&(ot(n[2],e[1])||ot(n[0],e[1]));if(2<e.length&&1===n.length)return ot(e[0],n[0])||ot(e[1],n[0])||ot(e[2],n[0]);if(2<n.length&&1===e.length)return ot(n[0],e[0])||ot(n[1],e[0])||ot(n[2],e[0]);if(1<e.length&&1===n.length)return ot(e[0],n[0])||ot(e[1],n[0]);if(1<n.length&&1===e.length)return ot(n[0],e[0])||ot(n[1],e[0])}return ot(e[0],n[0])}(n,this._points)},intersects:function(n){var t,e=this;return n instanceof M?!!e.hasPoint(n)&&[n]:i.Circle&&n instanceof i.Circle?!!(t=bn(e._lines,n.center,n.radius))&&t.map(M):i.Ellipse&&n instanceof i.Ellipse?!!(t=Cn(e._lines,n.center,n.radiusX,n.radiusY,n.cs))&&t.map(M):i.Arc&&n instanceof i.Arc?!!(t=$n(e._lines,n.center,n.rX,n.rY,n.cs,n.theta,n.dtheta))&&t.map(M):i.QBezier&&n instanceof i.QBezier?!!(t=wn(e._lines,n._points))&&t.map(M):n instanceof H?!!(t=_n(e._lines,n._points))&&t.map(M):n instanceof Y&&n.intersects(e)},f:function(n){return On(n,this._points)},bezierPoints:function(){var n=this._points;return[[{x:n[0].x,y:n[0].y},{x:n[1].x,y:n[1].y},{x:n[2].x,y:n[2].y},{x:n[3].x,y:n[3].y}]]},toSVG:function(n){return this.toSVGPath(!!arguments.length&&n)},toSVGPath:function(n){var t=this,e=t._points,e=["M",e[0].x,e[0].y,"C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y].join(" ");return arguments.length?lt("path",{id:[t.id,!1],d:[e,t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},n):e},toCanvas:function(n){this.style.toCanvas(n),this.toCanvasPath(n),n.stroke()},toCanvasPath:function(n){var t=this._points;n.beginPath(),n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y)}});i.CBezier=H;var W=e(q,{constructor:function n(t){var r=this,e=null,i=null,o=null,a=null,s=null;return t instanceof n?t:r instanceof n?(r.$super("constructor",[t]),b(r,"vertices",{get:function(){return r.points},set:function(n){r.points=n},enumerable:!0,configurable:!1}),b(r,"edges",{get:function(){var e=r.points;return 1<e.length?e.map(function(n,t){return new Q(n,e[(t+1)%e.length])}):[]},enumerable:!0,configurable:!1}),b(r,"_lines",{get:function(){return r._points.concat([r._points[0]])},enumerable:!1,configurable:!1}),b(r,"length",{get:function(){return null==e&&(e=Pn(r._lines)),e},enumerable:!0,configurable:!1}),b(r,"area",{get:function(){return null==i&&(i=function(n){for(var t,e,r=0,i=0,o=n.length-1;i<o;++i)t=n[i],e=n[i+1],r+=Wn(t.x,t.y,e.x,e.y)/2;return r}(r._lines)),i},enumerable:!0,configurable:!1}),b(r,"_bbox",{get:function(){if(null==o){o={ymin:1/0,xmin:1/0,ymax:-1/0,xmax:-1/0};for(var n=0,t=r._points,e=t.length;n<e;++n)o.ymin=S.min(o.ymin,t[n].y),o.ymax=S.max(o.ymax,t[n].y),o.xmin=S.min(o.xmin,t[n].x),o.xmax=S.max(o.xmax,t[n].x)}return o},enumerable:!1,configurable:!1}),b(r,"_hull",{get:function(){return null==a&&(a=Sn(r._points).map(M)),a},enumerable:!1,configurable:!1}),b(r,"_is_convex",{get:function(){return null==s&&(s=Gn(r._points)),s},enumerable:!1,configurable:!1}),void(r.isChanged=function(n){return!0===n&&(s=a=o=i=e=null),r.$super("isChanged",arguments)})):new n(t)},name:"Polygon",clone:function(){return new W(this.vertices.map(function(n){return n.clone()}))},transform:function(t){return new W(this.vertices.map(function(n){return n.transform(t)}))},isClosed:function(){return!0},isConvex:function(){return this._is_convex},hasPoint:function(n){return 2===hn(n,{x:this._bbox.xmax+10,y:n.y},this._lines)},hasInsidePoint:function(n,t){n=hn(n,{x:this._bbox.xmax+10,y:n.y},this._lines);return t?1===n:0<n},f:function(n){var t=this._lines,e=t.length-1,r=S.floor(n*e);return 1===n?{x:t[e].x,y:t[e].y}:Fn(e*(n-r/e),[t[r],t[r+1]])},intersects:function(n){var t,e=this;return n instanceof M?!!e.hasPoint(n)&&[n]:n instanceof Q?!!(t=vn(e._lines,n._points[0],n._points[1]))&&t.map(M):i.Circle&&n instanceof i.Circle?!!(t=bn(e._lines,n.center,n.radius))&&t.map(M):i.Ellipse&&n instanceof i.Ellipse?!!(t=Cn(e._lines,n.center,n.radiusX,n.radiusY,n.cs))&&t.map(M):i.Arc&&n instanceof i.Arc?!!(t=$n(e._lines,n.center,n.rX,n.rY,n.cs,n.theta,n.dtheta))&&t.map(M):i.QBezier&&n instanceof i.QBezier?!!(t=wn(e._lines,n._points))&&t.map(M):i.CBezier&&n instanceof i.CBezier?!!(t=_n(e._lines,n._points))&&t.map(M):i.Polyline&&n instanceof N||n instanceof W?!!(t=kn(e._lines,n._lines))&&t.map(M):n instanceof Y&&n.intersects(e)},intersectsSelf:function(){for(var n,t,e,r,i,o,a=[],s=this._lines,u=s.length,l=0;l<u&&!(u<=l+1);++l)for(t=l+2;t<u&&!(u<=t+1);++t)e=s[l],r=s[l+1],i=s[t],o=s[t+1],(n=yn(e,r,i,o))&&(0===l&&t===u-2&&on(e,o)?n=n.filter(function(n){return!on(n,e)}):t===l+2&&on(r,i)&&(n=n.filter(function(n){return!on(n,r)})),a.push.apply(a,n));return!!a&&a.map(M)},bezierPoints:function(){var r=this._lines,i=r.length;return r.reduce(function(n,t,e){return e+1<i&&(e=[r[e],r[e+1]],n.push([Fn(0,e),Fn(.5,e),Fn(.5,e),Fn(1,e)])),n},[])},toSVG:function(n){var t=this;return lt("polygon",{id:[t.id,!1],points:[t._points.map(function(n){return dt(n.x)+" "+dt(n.y)}).join(" "),t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},!!arguments.length&&n)},toSVGPath:function(n){var t=this,e="M "+t._lines.map(function(n){return dt(n.x)+" "+dt(n.y)}).join(" L ")+" Z";return arguments.length?lt("path",{id:[t.id,!1],d:[e,t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},n):e},toCanvas:function(n){this.style.toCanvas(n),this.toCanvasPath(n),"none"!==this.style.fill&&n.fill(),n.stroke()},toCanvasPath:function(n){var t,e=this._lines,r=e.length;for(n.beginPath(),n.moveTo(e[0].x,e[0].y),t=1;t<r;++t)n.lineTo(e[t].x,e[t].y);n.closePath()},toTex:function(){return"\\text{Polygon: }\\left("+this.vertices.map(bt).join(",")+"\\right)"},toString:function(){return"Polygon("+this.vertices.map(dt).join(",")+")"}}),n=e(i.Polygon=W,{constructor:function n(t,e,r){var i,o,a=this;return t instanceof n?t:a instanceof n?(i=M(t),o=Ct(e)&&Ct(r)?new M(i.x+vt(e),i.y+vt(r)):M(e),a.$super("constructor",[[i,new M(o.x,i.y),o,new M(i.x,o.y)]]),b(a,"topLeft",{get:function(){return a.points[0]},set:function(n){a.points[0]=n},enumerable:!0,configurable:!1}),b(a,"bottomRight",{get:function(){return a.points[2]},set:function(n){a.points[2]=n},enumerable:!0,configurable:!1}),b(a,"width",{get:function(){return G(a.bottomRight.x-a.topLeft.x)},set:function(n){a.bottomRight.x=a.topLeft.x+vt(n)},enumerable:!0,configurable:!1}),void b(a,"height",{get:function(){return G(a.bottomRight.y-a.topLeft.y)},set:function(n){a.bottomRight.y=a.topLeft.y+vt(n)},enumerable:!0,configurable:!1})):new n(t,e,r)}});i.Rect=n;var U=e(q,{constructor:function n(t,e){var r=this,i=null,o=null,a=null,s=null;return t instanceof n?t:r instanceof n?(i=new k(S.abs(vt(e))),r.$super("constructor",[[t],{radius:i}]),b(r,"center",{get:function(){return r.points[0]},set:function(n){r.points[0]=n},enumerable:!0,configurable:!1}),b(r,"radius",{get:function(){return i.val()},set:function(n){i.val(S.abs(vt(n))),i.isChanged()&&!r.isChanged()&&(r.isChanged(!0),r.triggerChange())},enumerable:!0,configurable:!1}),b(r,"length",{get:function(){return null==o&&(o=w*i.val()),o},enumerable:!0,configurable:!1}),b(r,"area",{get:function(){return null==a&&(a=$*i.val()*i.val()),a},enumerable:!0,configurable:!1}),b(r,"_bbox",{get:function(){var n,t;return null==s&&(n=r.center,t=i.val(),s={ymin:n.y-t,xmin:n.x-t,ymax:n.y+t,xmax:n.x+t}),s},enumerable:!1,configurable:!1}),void(r.isChanged=function(n){return!0===n&&(s=a=o=null),r.$super("isChanged",arguments)})):new n(t,e)},name:"Circle",clone:function(){return new U(this.center.clone(),this.radius)},transform:function(n){var t=this.center,e=this.radius,r=t.transform(n),n=new M(t.x+e,t.y+e).transform(n);return new U(r,Zn(r,n))},isClosed:function(){return!0},isConvex:function(){return!0},hasMatrix:function(){return!1},f:function(n){var t=this.center,e=this.radius;return In(n*w,t.x,t.y,e,e,1,0)},hasPoint:function(n){return self=this,2===cn(n,self.center,self.radius)},hasInsidePoint:function(n,t){n=cn(n,this.center,this.radius);return t?1===n:0<n},intersects:function(n){if(n instanceof M)return!!this.hasPoint(n)&&[n];if(n instanceof U){var t=function(n,t,e,r){{t<r&&(o=t,t=r,r=o,o=n,n=e,e=o)}var i=e.x-n.x,o=e.y-n.y,e=Nn(i,o);if(ot(e,0)&&ot(t,r))return!1;if(t+r<e||e+r<t)return!1;i/=e,o/=e;r=(t*t-r*r+e*e)/(2*e),e=n.x+r*i,n=n.y+r*o,r=C(t*t-r*r);return it(r,0)?[{x:e,y:n}]:[{x:e+r*o,y:n-r*i},{x:e-r*o,y:n+r*i}]}(this.center,this.radius,n.center,n.radius);return!!t&&t.map(M)}return n instanceof Y&&n.intersects(this)},bezierPoints:function(){var n=this.center,t=this.radius;return[Rn(0,-o,n.x,n.y,t,t,1,0),Rn(-o,-o,n.x,n.y,t,t,1,0),Rn(-$,-o,n.x,n.y,t,t,1,0),Rn(-a,-o,n.x,n.y,t,t,1,0)]},toSVG:function(n){var t=this,e=t.center,r=t.radius;return lt("circle",{id:[t.id,!1],cx:[e.x,t.center.isChanged()],cy:[e.y,t.center.isChanged()],r:[r,t.values.radius.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},!!arguments.length&&n)},toSVGPath:function(n){var t=this,e=t.center,r=t.radius,e=["M",e.x-r,e.y,"A",r,r,0,0,0,e.x+r,e.y,"A",r,r,0,0,0,e.x-r,e.y,"Z"].join(" ");return arguments.length?lt("path",{id:[t.id,!1],d:[e,t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},n):e},toCanvas:function(n){this.style.toCanvas(n),this.toCanvasPath(n),"none"!==this.style.fill&&n.fill(),n.stroke()},toCanvasPath:function(n){var t=this.center,e=this.radius;n.beginPath(),n.arc(t.x,t.x,e,0,w),n.closePath()},toTex:function(){var n=this.center,t=dt(this.radius);return"\\text{Circle: }\\left|\\begin{pmatrix}\\frac{x"+pt(-n.x)+"}{"+t+"}\\\\\\frac{y"+pt(-n.y)+"}{"+t+"}\\end{pmatrix}\\right|^2 = 1"},toString:function(){return"Circle("+[dt(this.center),dt(this.radius)].join(",")+")"}});i.Circle=U;var J=e(q,{constructor:function n(t,e,r,i){var s=this,u=null,l=null,o=null,c=0,f=0,a=null,h=null,y=null,g=null;return t instanceof n?t:s instanceof n?(u=new k(S.abs(vt(e))),l=new k(S.abs(vt(r))),o=new k(i),c=S.cos(et(o.val())),f=S.sin(et(o.val())),s.$super("constructor",[[t],{radiusX:u,radiusY:l,angle:o}]),b(s,"center",{get:function(){return s.points[0]},set:function(n){s.points[0]=n},enumerable:!0,configurable:!1}),b(s,"radiusX",{get:function(){return u.val()},set:function(n){u.val(S.abs(vt(n))),u.isChanged()&&!s.isChanged()&&(s.isChanged(!0),s.triggerChange())},enumerable:!0,configurable:!1}),b(s,"radiusY",{get:function(){return l.val()},set:function(n){l.val(S.abs(vt(n))),l.isChanged()&&!s.isChanged()&&(s.isChanged(!0),s.triggerChange())},enumerable:!0,configurable:!1}),b(s,"angle",{get:function(){return o.val()},set:function(n){o.val(n),c=S.cos(et(o.val())),f=S.sin(et(o.val())),o.isChanged()&&!s.isChanged()&&(s.isChanged(!0),s.triggerChange())},enumerable:!0,configurable:!1}),b(s,"cs",{get:function(){return[c,f]},enumerable:!1,configurable:!1}),b(s,"length",{get:function(){return null==a&&(a=$*(3*(u.val()+l.val())-C((3*u.val()+l.val())*(u.val()+3*l.val())))),a},enumerable:!0,configurable:!1}),b(s,"area",{get:function(){return null==h&&(h=$*u.val()*l.val()),h},enumerable:!0,configurable:!1}),b(s,"_bbox",{get:function(){var n,t,e,r,i,o,a;return null==y&&(n=s.center,t=u.val(),a=l.val(),o=S.tan(et(s.angle)),r=In(e=S.atan2(-a*o,t),n.x,n.y,t,a,c,f),i=In(e+$,n.x,n.y,t,a,c,f),o=In(e=S.atan2(a,t*o),n.x,n.y,t,a,c,f),a=In(e+$,n.x,n.y,t,a,c,f),y={ymin:S.min(o.y,a.y),xmin:S.min(r.x,i.x),ymax:S.max(o.y,a.y),xmax:S.max(r.x,i.x)}),y},enumerable:!1,configurable:!1}),b(s,"_hull",{get:function(){var n,t,e;return null==g&&(n=s.center,t=u.val(),e=l.val(),g=[new M(Ln(-1,-1,n.x,n.y,t,e,c,f)),new M(Ln(1,-1,n.x,n.y,t,e,c,f)),new M(Ln(1,1,n.x,n.y,t,e,c,f)),new M(Ln(-1,1,n.x,n.y,t,e,c,f))]),g},enumerable:!1,configurable:!1}),void(s.isChanged=function(n){return!0===n&&(g=y=h=a=null),s.$super("isChanged",arguments)})):new n(t,e,r,i)},name:"Ellipse",clone:function(){return new J(this.center.clone(),this.radiusX,this.radiusY,this.angle)},transform:function(n){var t=this.center,e=this.radiusX,r=this.radiusY,i=this.angle,o=n.getTranslation(),a=tt(n.getRotationAngle()),n=n.getScale();return new J(new M(t.x+o.x,t.y+o.y),e*n.x,r*n.y,i+a)},isClosed:function(){return!0},isConvex:function(){return!0},hasMatrix:function(){return!1},f:function(n){var t=this.center,e=this.cs;return In(n*w,t.x,t.y,this.radiusX,this.radiusY,e[0],e[1])},d:function(){return new J(this.center,this.radiusY,this.radiusX,-this.angle)},hasPoint:function(n){return 2===fn(n,this.center,this.radiusX,this.radiusY,this.cs)},hasInsidePoint:function(n,t){n=fn(n,this.center,this.radiusX,this.radiusY,this.cs);return t?1===n:0<n},intersects:function(n){var t;return n instanceof M?!!this.hasPoint(n)&&[n]:i.Circle&&n instanceof i.Circle?!!(t=bn(this._lines,n.center,n.radius))&&t.map(M):n instanceof J?!!(t=Cn(this._lines,n.center,n.radiusX,n.radiusY,n.cs))&&t.map(M):n instanceof Y&&n.intersects(this)},bezierPoints:function(){var n=this.center,t=this.cs,e=t[0],r=t[1],i=this.radiusX,t=this.radiusY;return[Rn(0,-o,n.x,n.y,i,t,e,r),Rn(-o,-o,n.x,n.y,i,t,e,r),Rn(-$,-o,n.x,n.y,i,t,e,r),Rn(-a,-o,n.x,n.y,i,t,e,r)]},toSVG:function(n){var t=this,e=t.center,r=t.radiusX,i=t.radiusY,o=t.angle;return lt("ellipse",{id:[t.id,!1],cx:[e.x,t.center.isChanged()],cy:[e.y,t.center.isChanged()],rx:[r,t.values.radiusX.isChanged()],ry:[i,t.values.radiusY.isChanged()],transform:["rotate("+dt(o)+" "+dt(e.x)+" "+dt(e.y)+")",t.center.isChanged()||t.values.angle.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},!!arguments.length&&n)},toSVGPath:function(n){var t=this,e=t.radiusX,r=t.radiusY,i=t.angle,o=t.f(0),a=t.f(.5),o=["M",o.x,o.y,"A",e,r,i,0,1,a.x,a.y,"A",e,r,i,0,1,o.x,o.y,"Z"].join(" ");return arguments.length?lt("path",{id:[t.id,!1],d:[o,t.isChanged()],style:[t.style.toSVG(),t.style.isChanged()]},n):o},toCanvas:function(n){this.style.toCanvas(n),this.toCanvasPath(n),"none"!==this.style.fill&&n.fill(),n.stroke()},toCanvasPath:function(n){var t=this.center,e=this.radiusX,r=this.radiusY,i=et(this.angle);n.beginPath(),n.ellipse(t.x,t.x,e,r,i,0,w),n.closePath()},toTex:function(){var n=dt(this.angle)+"\\text{°}",t=this.center,e=dt(this.radiusX),r=dt(this.radiusY);return"\\text{Ellipse: }\\left|\\begin{pmatrix}\\cos("+n+")&-\\sin("+n+")\\\\sin("+n+")&\\cos("+n+")\\end{pmatrix}\\begin{pmatrix}\\frac{x"+pt(-t.x)+"}{"+e+"}\\\\\\frac{y"+pt(-t.y)+"}{"+r+"}\\end{pmatrix}\\right|^2 = 1"},toString:function(){return"Ellipse("+[dt(this.center),dt(this.radiusX),dt(this.radiusY),dt(this.angle)+"°"].join(",")+")"}});i.Ellipse=J;n=e(Y,{});i.Shape=n;n={linear:function(n){return n},"ease-in-quad":function(n){return n*n},"ease-out-quad":function(n){n=1-n;return 1-n*n},"ease-in-out-quad":function(n){return n<.5?2*n*n:1-S.pow(2-2*n,2)/2},"ease-in-cubic":function(n){return n*n*n},"ease-out-cubic":function(n){return 1-S.pow(1-n,3)},"ease-in-out-cubic":function(n){return n<.5?4*n*n*n:1-S.pow(2-2*n,3)/2},"cubic-bezier":function(n,t,e,r){return u=(n=[n,t,e,r]).length-1,t=n[0]||0,e=(0<u?n[1]:t)||0,r=(1<u?n[2]:e)||0,n=(2<u?n[3]:r)||0,function(i,o,a,s){return 3<=u?function(n){var t=1-n,e=n*n,r=t*t;return t*r*i+3*r*n*o+3*t*e*a+e*n*s}:2==u?function(n){var t=1-n;return t*t*i+2*t*n*o+n*n*a}:1==u?function(n){return(1-n)*i+n*o}:function(n){return i}}(t,e,r,n);var u},"ease-in-expo":function(n){return 0===n?0:S.pow(2,10*n-10)},"ease-out-expo":function(n){return 1===n?1:1-S.pow(2,-10*n)},"ease-in-out-expo":function(n){return 0===n?0:1===n?1:n<.5?S.pow(2,20*n-10)/2:(2-S.pow(2,10-20*n))/2},"ease-in-back":function(n){return 2.70158*n*n*n-1.70158*n*n},"ease-out-back":function(n){--n;return 1+2.70158*S.pow(n,3)+1.70158*S.pow(n,2)},"ease-in-out-back":function(n){var t=2.5949095;return n<.5?S.pow(2*n,2)*(7.189819*n-t)/2:(S.pow(2*n-2,2)*((1+t)*(2*n-2)+t)+2)/2},"ease-in-elastic":function(n){return 0===n?0:1===n?1:-S.pow(2,10*n-10)*S.sin((10*n-10.75)*w/3)},"ease-out-elastic":function(n){return 0===n?0:1===n?1:S.pow(2,-10*n)*S.sin((10*n-.75)*w/3)+1},"ease-in-out-elastic":function(n){return 0===n?0:1===n?1:n<.5?-(S.pow(2,20*n-10)*S.sin((20*n-11.125)*w/4.5))/2:S.pow(2,-20*n+10)*S.sin((20*n-11.125)*w/4.5)/2+1},"ease-in-bounce":function(n){return 1-K(1-n)},"ease-out-bounce":K,"ease-in-out-bounce":function(n){return n<.5?(1-K(1-2*n))/2:(1+K(2*n-1))/2}};function K(n){var t,e=7.5625,r=2.75;return n<1/r?e*n*n:n<2/r?(t=n-1.5)/r*e*t+.75:n<2.5/r?(t=n-2.25)/r*e*t+.9375:(t=n-2.625)/r*e*t+.984375}function nn(p,n){(p=p||{}).keyframes||(p.keyframes={"0%":p.from,"100%":p.to});var m={duration:null==p.duration?1e3:p.duration||0,delay:p.delay||0,fps:nt(null!=p.fps?vt(p.fps):n,1,n),nframes:0,keyframes:null,kf:0,current:null,reverse:!1,bb:{ymin:1/0,xmin:1/0,ymax:-1/0,xmax:-1/0}},d=kt(p.easing)?p.easing:$t(p.easing)&&v.call(rn.Easing,p.easing)?rn.Easing[p.easing]:rn.Easing.linear;m.nframes=S.ceil(m.duration/1e3*m.fps),m.keyframes=Object.keys(p.keyframes||_).map(function(n){var t=p.keyframes[n]||_,e=t.shape&&kt(t.shape.bezierPoints)?t.shape.bezierPoints():[],r=t.transform||_,i=r.scale||_,o=i.origin||{x:0,y:0},a=r.rotate||_,s=a.origin||{x:0,y:0},u=r.translate||_,l=t.style||_,c=$t(l.stroke)?E.parse(l.stroke)||l.stroke:null,f=$t(l.fill)?E.parse(l.fill)||l.fill:null,h=wt(c),y=wt(f),g=v.call(l,"stroke-opacity"),x=v.call(l,"fill-opacity");return t.shape&&kt(t.shape.getBoundingBox)&&(r=t.shape.getBoundingBox(),m.bb.ymin=S.min(m.bb.ymin,r.ymin||0),m.bb.xmin=S.min(m.bb.xmin,r.xmin||0),m.bb.ymax=S.max(m.bb.ymax,r.ymax||0),m.bb.xmax=S.max(m.bb.xmax,r.xmax||0)),{frame:S.round(vt(n)/100*(m.nframes-1)),shape:[e.slice(),e.slice()],transform:{scale:{origin:{x:o.x||0,y:o.y||0},x:(null==i.x?1:i.x)||0,y:(null==i.y?1:i.y)||0},rotate:{origin:{x:s.x||0,y:s.y||0},angle:et(a.angle||0)},translate:{x:u.x||0,y:u.y||0}},style:{stroke:h?c.slice(0,3):c,"stroke-opacity":g?vt(l["stroke-opacity"]):h?c[3]:1,fill:y?f.slice(0,3):f,"fill-opacity":x?vt(l["fill-opacity"]):y?f[3]:1,hasStroke:h,hasFill:y},easing:kt(t.easing)?t.easing:$t(t.easing)&&v.call(rn.Easing,t.easing)?rn.Easing[t.easing]:d}}).sort(function(n,t){return n.frame-t.frame});function e(n,t,e,r){for(var i,o,a,s,u,l,c,f=n.shape[e],h=t.shape[e+r],y=f.length,g=h.length,x=S.max(y,g),p=0,m=0,d=0;d<x;++d)y<=p?(i=0<y?f[y-1][3]:{x:0,y:0},f.push([{x:i.x,y:i.y},{x:i.x,y:i.y},{x:i.x,y:i.y},{x:i.x,y:i.y}]),++y,++p):g<=m?(i=0<g?h[g-1][3]:{x:0,y:0},h.push([{x:i.x,y:i.y},{x:i.x,y:i.y},{x:i.x,y:i.y},{x:i.x,y:i.y}]),++g,++m):(o=f[p],a=h[m],s=o[0],u=o[3],l=a[0],c=a[3],Dn(s,l)<=Dn(s,c)&&Dn(u,c)<=Dn(u,l)?(++p,++m):(i=o[0],f.splice(p,0,[{x:i.x,y:i.y},{x:i.x,y:i.y},{x:i.x,y:i.y},{x:i.x,y:i.y}]),i=a[3],h.splice(m+1,0,[{x:i.x,y:i.y},{x:i.x,y:i.y},{x:i.x,y:i.y},{x:i.x,y:i.y}]),++y,++g,++x,p+=2,m+=2))}function r(n,t){for(var e=n.length?n[n.length-1][3]:{x:0,y:0};n.length<t;)n.push([{x:e.x,y:e.y},{x:e.x,y:e.y},{x:e.x,y:e.y},{x:e.x,y:e.y}])}var i=0;return m.keyframes.forEach(function(n,t){t+1<m.keyframes.length&&e(m.keyframes[t],m.keyframes[t+1],0,1),i=S.max(i,m.keyframes[t].shape[0].length)}),m.keyframes.forEach(function(n,t){r(n.shape[0],i),r(n.shape[1],i)}),m}function tn(n){return n.reverse?n.nframes-1===n.current.frame:0===n.current.frame}function en(n){return n.reverse?n.current.frame<0:n.current.frame>=n.nframes}n["ease-in"]=n["ease-in-quad"],n["ease-out"]=n["ease-out-quad"],n["ease-in-out"]=n["ease-in-out-quad"];var rn=e(Y,{constructor:function n(l){var t,e,r=this,i=!1,o=0,a=null,s=null,u=null;return l instanceof n?l:r instanceof n?(Y.call(r),r.start=function(){return i=!0,a&&(clearTimeout(a),a=null),tn(l)&&s&&s(r),a=setTimeout(e,(tn(l)&&l.delay||0)+o),r},r.stop=function(){return i=!1,a&&(clearTimeout(a),a=null),r},r.rewind=function(){return function(n){n.reverse?n.kf=n.keyframes.length-1:n.kf=0;var t,e,r,i,o,a,s=n.keyframes[n.kf],u=s.transform.translate.x,l=s.transform.translate.y,c=s.transform.scale.origin.x,f=s.transform.scale.origin.y,h=s.transform.scale.x,y=s.transform.scale.y,g=s.transform.rotate.origin.x,x=s.transform.rotate.origin.y,p=s.transform.rotate.angle,m=1,d=0,v=s.shape[n.reverse?1:0],b=v.length,C=new Array(b);for(ot(p,0)||(m=S.cos(p),d=S.sin(p)),u+=g-m*g+d*x,l+=x-m*x-d*g,e=0;e<b;++e){for(t=v[e],a=new Array(4),r=0;r<4;++r)i=h*((o=t[r]).x-c)+c,o=y*(o.y-f)+f,a[r]={x:m*i-d*o+u,y:d*i+m*o+l};C[e]=a}n.current={frame:n.reverse?n.nframes-1:0,shape:C,transform:s.transform,style:s.style}}(l),r.isChanged(!0),r},r.reverse=function(n){return l.reverse=!!n,r},r.onStart=function(n){return s=kt(n)?n:null,r},r.onEnd=function(n){return u=kt(n)?n:null,r},r.numberOfFrames=function(){return l.nframes},r.framesPerSecond=function(){return l.fps},r.getBoundingBox=function(){return{ymin:l.bb.ymin,xmin:l.bb.xmin,ymax:l.bb.ymax,xmax:l.bb.xmax}},r.toSVGPath=function(n){var i=0,o=0,a=0,s=0,u=!0,t=l.current.shape.map(function(n,t){var e,r=!0;return 0===t?(i=n[0].x,o=n[0].y,r=!0,e=["M",n[0].x,n[0].y,"C",n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y].join(" ")):(e=((r=ot(n[0].x,a)&&ot(n[0].y,s))?["C",n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y]:["M",n[0].x,n[0].y,"C",n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y]).join(" "),r||(u=!!(u&&ot(i,a)&&ot(o,s))&&(e="Z "+e,!0),i=n[0].x,o=n[0].y)),a=n[3].x,s=n[3].y,e}).join(" ");return u&&ot(i,a)&&ot(o,s)&&(t+=" Z"),arguments.length&&(l.current.style.stroke&&(r.style.stroke=l.current.style.hasStroke?E.toCSS(l.current.style.stroke):l.current.style.stroke,r.style["stroke-opacity"]=l.current.style["stroke-opacity"]),l.current.style.fill&&(r.style.fill=l.current.style.hasFill?E.toCSS(l.current.style.fill):l.current.style.fill,r.style["fill-opacity"]=l.current.style["fill-opacity"])),arguments.length?lt("path",{id:[r.id,!1],d:[t,r.isChanged()],style:[r.style.toSVG(),r.style.isChanged()]},n):t},r.toSVG=function(n){return r.toSVGPath(!!arguments.length&&n)},r.toCanvas=function(n){n.lineWidth=r.style["stroke-width"],n.strokeStyle=l.current.style.hasStroke?E.toCSS(l.current.style.stroke.concat([l.current.style["stroke-opacity"]])):l.current.style.stroke||r.style.stroke,l.current.style.fill&&(n.fillStyle=l.current.style.hasFill?E.toCSS(l.current.style.fill.concat([l.current.style["fill-opacity"]])):l.current.style.fill),r.toCanvasPath(n),l.current.style.fill&&n.fill(),n.stroke()},r.toCanvasPath=function(e){var r=0,i=0,o=0,a=0,s=!0;l.current.shape.forEach(function(n,t){0===t?(r=n[0].x,i=n[0].y,e.beginPath(),e.moveTo(r,i)):ot(n[0].x,o)&&ot(n[0].y,a)||(s=!!(s&&ot(r,o)&&ot(i,a))&&(e.closePath(),e.beginPath(),!0),r=n[0].x,i=n[0].y,e.moveTo(r,i)),e.bezierCurveTo(n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y),o=n[3].x,a=n[3].y}),s&&ot(r,o)&&ot(i,a)&&e.closePath()},r.dispose=function(){i=!1,a&&clearTimeout(a),l=u=s=a=null,r.$super("dispose")},t=(l=nn(l,60)).fps,o=S.floor(1e3/t),e=function n(){i&&l&&(!function(n){if(n.current.frame=nt(n.current.frame+(n.reverse?-1:1),-1,n.nframes),!en(n)){var t,e;b=n.reverse?(1<=n.kf&&n.current.frame<=n.keyframes[n.kf-1].frame&&0<=n.kf-2&&--n.kf,t=n.keyframes[n.kf],e=n.keyframes[1<=n.kf?n.kf-1:0],G(n.current.frame-t.frame)/(t.frame-e.frame+1)):(n.kf+1<n.keyframes.length&&n.current.frame>=n.keyframes[n.kf+1].frame&&n.kf+2<n.keyframes.length&&++n.kf,t=n.keyframes[n.kf],e=n.keyframes[n.kf+1<n.keyframes.length?n.kf+1:n.keyframes.length-1],(n.current.frame-t.frame)/(e.frame-t.frame+1));var r,i,o,a,s,u,l,c,f=t.easing(b),h=Mn(t.transform.translate.x,e.transform.translate.x,f),y=Mn(t.transform.translate.y,e.transform.translate.y,f),g=Mn(t.transform.scale.origin.x,e.transform.scale.origin.x,f),x=Mn(t.transform.scale.origin.y,e.transform.scale.origin.y,f),p=Mn(t.transform.scale.x,e.transform.scale.x,f),m=Mn(t.transform.scale.y,e.transform.scale.y,f),d=Mn(t.transform.rotate.origin.x,e.transform.rotate.origin.x,f),v=Mn(t.transform.rotate.origin.y,e.transform.rotate.origin.y,f),b=Mn(t.transform.rotate.angle,e.transform.rotate.angle,f),C=1,$=0,w=t.shape[n.reverse?1:0],_=e.shape[n.reverse?0:1],k=w.length,P=new Array(k);for(ot(b,0)||(C=S.cos(b),$=S.sin(b)),h+=d-C*d+$*v,y+=v-C*v-$*d,a=0;a<k;++a){for(r=w[a],i=_[a],c=new Array(4),s=0;s<4;++s)l=r[s],o=i[s],u=p*(l.x+f*(o.x-l.x)-g)+g,l=m*(l.y+f*(o.y-l.y)-x)+x,c[s]={x:C*u-$*l+h,y:$*u+C*l+y};P[a]=c}return n.current.shape=P,n.current.style={stroke:t.style.hasStroke&&e.style.hasStroke?z(t.style.stroke,e.style.stroke,f):t.style.stroke?t.style.stroke:e.style.stroke||n.current.style.stroke,"stroke-opacity":Mn(t.style["stroke-opacity"],e.style["stroke-opacity"],f),fill:t.style.hasFill&&e.style.hasFill?z(t.style.fill,e.style.fill,f):t.style.fill?t.style.fill:e.style.fill||"none","fill-opacity":Mn(t.style["fill-opacity"],e.style["fill-opacity"],f),hasStroke:t.style.hasStroke&&e.style.hasStroke,hasFill:t.style.hasFill&&e.style.hasFill}}}(l)||(r.isChanged(!0),en(l)?u&&setTimeout(function(){u(r)},o):a=setTimeout(n,o)))},void r.rewind()):new n(l)},name:"Tween",rewind:null,start:null,stop:null,onStart:null,onEnd:null},{Easing:n});i.Tween=rn;n=e(null,{constructor:function n(t,i,o,a,s){var e,r,u,l=this,c=null,f=null,h=null,y=null,g=!0;if(!(l instanceof n))return new n(t,i,o,a,s);i=vt(i),o=vt(o),a=vt(a),s=vt(s),h=[],b(l,"x0",{get:function(){return i},set:function(n){n=vt(n),i!==n&&(g=!0),i=n},enumerable:!0,configurable:!(f={})}),b(l,"x1",{get:function(){return a},set:function(n){n=vt(n),a!==n&&(g=!0),a=n},enumerable:!0,configurable:!1}),b(l,"y0",{get:function(){return o},set:function(n){n=vt(n),o!==n&&(g=!0),o=n},enumerable:!0,configurable:!1}),b(l,"y1",{get:function(){return s},set:function(n){n=vt(n),s!==n&&(g=!0),s=n},enumerable:!0,configurable:!1}),l.add=function(n){return n instanceof Y&&(v.call(f,n.id)||(f[n.id]=null,h.push(n),g=!0)),l},l.remove=function(n){var t,e=h.indexOf(n);return-1!==e&&(t=f[n.id],x&&t&&t.parentNode&&t.parentNode.removeChild(t),delete f[n.id],h.splice(e,1),g=!0),l},l.getIntersections=function(){if(!h||!h.length)return[];if(g||!y){y=[];for(var n,t,e=0,r=h.length;e<r;++e)for((t=h[e].intersectsSelf())&&y.push.apply(y,t),n=e+1;n<r;++n)(t=h[e].intersects(h[n]))&&y.push.apply(y,t)}return y?y.map(function(n){return n.clone()}):[]},l.dispose=function(){return x&&c&&c.parentNode&&c.parentNode.removeChild(c),x&&window.cancelAnimationFrame(u),h=f=c=null,l},l.toSVG=function(){return lt("svg",{xmlns:["http://www.w3.org/2000/svg",!0],viewBox:[dt(i)+" "+dt(o)+" "+dt(a)+" "+dt(s),!0]},!1,h.map(function(n){return n instanceof Y?n.toSVG():""}).join(""))},l.toCanvas=function(n){return x?r(n||document.createElement("canvas")):n},l.toIMG=function(){return x?l.toCanvas(document.createElement("canvas")).toDataURL("image/png"):""},e=function n(){h&&(c?g&&lt("svg",{viewBox:[dt(i)+" "+dt(o)+" "+dt(a)+" "+dt(s),g]},c):(c=lt("svg",{xmlns:["http://www.w3.org/2000/svg",!1],style:["position:absolute;top:0;left:0;width:100%;height:100%",!1],viewBox:[dt(i)+" "+dt(o)+" "+dt(a)+" "+dt(s),g]},null),t.appendChild(c)),h.forEach(function(n){var t;n instanceof Y&&(null===(t=f[n.id])?(f[n.id]=t=n.toSVG(null),t&&c.appendChild(t)):t&&n.isChanged()&&n.toSVG(t),n.isChanged(!1))}),g=!1,u=window.requestAnimationFrame(n))},r=function(n){var t,e,r;return h&&n&&(t=S.abs(a-i),e=S.abs(s-o),n.style.width=dt(t)+"px",n.style.height=dt(e)+"px",n.width=t,n.height=e,(r=n.getContext("2d")).clearRect(0,0,t,e),r.translate(-i,-o),h.forEach(function(n){n instanceof Y&&n.toCanvas(r)})),n},x&&(u=window.requestAnimationFrame(e))},dispose:null,add:null,remove:null,getIntersections:null,toSVG:null,toCanvas:null,toIMG:null});function on(n,t){return ot(n.x,t.x)&&ot(n.y,t.y)}function an(n,t,e){var r=t.x,i=t.y,o=e.x,a=e.y,t=n.x,e=n.y,n=o-r,o=a-i,a=Nn(n,o);return it(a,0)?Nn(t-r,e-i):G(n*(i-e)-o*(r-t))/a}function sn(n,t,e){var r=t.x,i=t.y,o=e.x,a=e.y,s=n.x,t=n.y,e=0,n=o-r,o=a-i,a=Nn(n,o);return it(a,0)?Nn(s-r,t-i):(e=S.max(0,S.min(1,((s-r)*n+(t-i)*o)/a)),Nn(s-r-e*n,t-i-e*o))}function un(n,t,e){var r,i=n.x-t.x,o=e.x-t.x,n=n.y-t.y,t=e.y-t.y;return!!ot(n*o,t*i)&&(0<=(r=it(o,0)?n/t:i/o)&&r<=1)}function ln(n,t,e,r,i,o,a){var s=i[0],u=i[1],i=n.x-t.x,n=n.y-t.y,t=s*i+u*n,n=-u*i+s*n,e=S.atan2(n/r,t/e);return e<0&&(e+=w),0<=(e=(e-o)/a)&&e<=1}function cn(n,t,e){var r=n.x-t.x,t=n.y-t.y,t=r*r+t*t,e=e*e;return ot(t,e)?2:t<e?1:0}function fn(n,t,e,r,i){var o=e*e,a=r*r,e=i[0],r=i[1],i=n.x-t.x,n=n.y-t.y,t=e*i-r*n,i=e*n+r*i,a=t*t/o+i*i/a;return ot(a,1)?2:a<1?1:0}function hn(n,t,e){for(var r,i,o=0,a=0,s=e.length-1;o<s;++o){if(un(n,r=e[o],i=e[o+1]))return 2;yn(n,t,r,i)&&++a}return 1&a?1:0}function yn(n,t,e,r){var i=Vn(t.y-n.y,n.x-t.x,t.x*n.y-n.x*t.y,r.y-e.y,e.x-r.x,r.x*e.y-e.x*r.y);return!!(i&&un(i,n,t)&&un(i,e,r))&&i}function gn(n,t,e,r){3<arguments.length&&(e=zn(e,r));var i,o,a=new Array(2),s=0,u=Bn(t.y-n.y,n.x-t.x,t.x*n.y-n.x*t.y,e[0],e[1],e[2],e[3],e[4],e[5]);if(!u)return!1;for(i=0,o=u.length;i<o;++i)un(u[i],n,t)&&(a[s++]=u[i]);return a.length=s,!!a.length&&a}function xn(n,t,e,r,i,o){5<arguments.length&&(e=En(e,r,i,o));var a,s,u=new Array(2),l=0,c=Bn(t.y-n.y,n.x-t.x,t.x*n.y-n.x*t.y,e[0],e[1],e[2],e[3],e[4],e[5]);if(!c)return!1;for(a=0,s=c.length;a<s;++a)un(c[a],n,t)&&(u[l++]=c[a]);return u.length=l,!!u.length&&u}function pn(n,t,e,r,i,o,a,s,u){null==e&&(e=En(r,i,o,a));var l,c,f=new Array(2),h=0,y=Bn(t.y-n.y,n.x-t.x,t.x*n.y-n.x*t.y,e[0],e[1],e[2],e[3],e[4],e[5]);if(!y)return!1;for(l=0,c=y.length;l<c;++l)un(y[l],n,t)&&ln(y[l],r,i,o,a,s,u)&&(f[h++]=y[l]);return f.length=h,!!f.length&&f}function mn(n,t,e,r){null==e&&(e=Xn(r));var i,o,a,s=new Array(2),u=0,l=t.y-n.y,c=n.x-t.x,f=n.x*(n.y-t.y)+n.y*(t.x-n.x),h=Tn(l*e[0].x+c*e[0].y,l*e[1].x+c*e[1].y,l*e[2].x+c*e[2].y+f);if(!h)return!1;for(i=0,o=h.length;i<o;++i)h[i]<0||1<h[i]||un(a=qn(h[i],r),n,t)&&(s[u++]=a);return s.length=u,!!s.length&&s}function dn(n,t,e,r){null==e&&(e=Yn(r));for(var i,o=new Array(3),a=0,s=t.y-n.y,u=n.x-t.x,l=n.x*(n.y-t.y)+n.y*(t.x-n.x),c=jn(s*e[0].x+u*e[0].y,s*e[1].x+u*e[1].y,s*e[2].x+u*e[2].y,s*e[3].x+u*e[3].y+l),f=0,h=c.length;f<h;++f)c[f]<0||1<c[f]||un(i=On(c[f],r),n,t)&&(o[a++]=i);return o.length=a,!!o.length&&o}function vn(n,t,e){for(var r,i=[],o=n.length-1,a=0;a<o;++a)(r=yn(n[a],n[a+1],t,e))&&i.push(r);return!!i.length&&i}function bn(n,t,e){for(var r,i=[],o=n.length-1,a=zn(t,e),s=0;s<o;++s)(r=gn(n[s],n[s+1],a))&&i.push.apply(i,r);return!!i.length&&i}function Cn(n,t,e,r,i){for(var o,a=[],s=n.length-1,u=En(t,e,r,i),l=0;l<s;++l)(o=xn(n[l],n[l+1],u))&&a.push.apply(a,o);return!!a.length&&a}function $n(n,t,e,r,i,o,a){for(var s,u=[],l=n.length-1,c=En(t,e,r,i),f=0;f<l;++f)(s=pn(n[f],n[f+1],c,t,e,r,i,o,a))&&u.push.apply(u,s);return!!u.length&&u}function wn(n,t){for(var e,r=[],i=n.length-1,o=Xn(t),a=0;a<i;++a)(e=mn(n[a],n[a+1],o,t))&&r.push.apply(r,e);return!!r.length&&r}function _n(n,t){for(var e,r=[],i=n.length-1,o=Yn(t),a=0;a<i;++a)(e=dn(n[a],n[a+1],o,t))&&r.push.apply(r,e);return!!r.length&&r}function kn(n,t){for(var e,r,i=[],o=n.length-1,a=t.length-1,s=0;s<o;++s)for(e=0;e<a;++e)(r=yn(n[s],n[s+1],t[e],t[e+1]))&&i.push(r);return!!i.length&&i}function Pn(n){for(var t,e,r=0,i=0,o=n.length-1;i<o;++i)t=n[i],e=n[i+1],r+=Nn(t.x-e.x,t.y-e.y);return r}function Sn(t){var e,n,r,i,o,a,s,u=t.length;if(u<3)return t;for(e=t[0],n=0,r=1;r<u;++r)((i=t[r]).y<e.y||ot(i.y,e.y)&&i.x<e.x)&&(e=i,n=r);for(t.splice(n,1),--u,o=t.map(function(n,t){return[function(n,t,e,r){n=S.atan2(r-t,e-n);return n<0?n+w:n}(e.x,e.y,n.x,n.y),t]}).sort(function(n,t){return n[0]-t[0]}).map(function(n){return t[n[1]]}),(a=new Array(u+1))[0]=e,a[1]=o[0],a[2]=o[1],s=3,r=2;r<u;++r){for(;1<s&&0<=Kn(o[r],a[s-1],a[s-2]);)--s;a[s++]=o[r]}return a.length=s,a}function Gn(n){var t=n.length;if(t<3)return!1;var e,r,i=n[t-2].x,o=n[t-2].y,a=n[t-1].x,s=n[t-1].y,u=S.atan2(s-o,a-i),l=0,c=0,f=0;for(ndx=0;ndx<t;++ndx){if(i=a,o=s,e=u,a=(r=n[ndx]).x,s=r.y,(c=(u=S.atan2(s-o,a-i))-e)<=-$?c+=w:$<c&&(c-=w),0===ndx){if(0===c)return!1;f=0<c?1:-1}else if(f*c<=0)return!1;l+=c}return 1===G(S.round(l/w))}function An(n,t){return!it(n,0)&&[-t/n]}function Tn(n,t,e){if(it(n,0))return An(t,e);var r=t*t-4*n*e,e=0;return ot(r,0)?[-t/(2*n)]:!(r<0)&&[(-t-(e=C(r)))/(2*n),(-t+e)/(2*n)]}function jn(n,t,e,r){if(it(n,0))return Tn(t,e,r);var i,o=t/n,a=e/n,s=(3*a-o*o)/9,u=(9*o*a-27*(r/n)-2*l(o,3))/54,t=l(s,3)+l(u,2),e=0,r=0,n=0;return 0<=t?(a=rt(u+(e=C(t)))*l(G(u+e),1/3),r=rt(u-e)*l(G(u-e),1/3),ot(G(c*(a-r)/2),0)?[-o/3+(a+r),-o/3-(a+r)/2]:[-o/3+(a+r)]):(n=S.acos(u/C(-l(s,3))),[(i=2*C(-s))*S.cos(n/3)-o/3,i*S.cos((n+w)/3)-o/3,i*S.cos((n+2*w)/3)-o/3])}function Vn(n,t,e,r,i,o){var a=n*i-t*r;return!it(a,0)&&{x:(t*o-e*i)/a,y:(e*r-n*o)/a}}function Bn(n,t,e,r,i,o,a,s,u){var l,c,f,h,y;return it(n,0)?!!(l=An(t,e))&&(!!(l=Tn(r,o*(c=l[0])+a,i*c*c+s*c+u))&&(2===l.length?[{x:l[0],y:c},{x:l[1],y:c}]:[{x:l[0],y:c}])):!it(h=2*(r*t*t+i*n*n-o*n*t),0)&&(!((f=-4*r*i*e*e+4*r*s*e*t-4*r*u*t*t+4*i*a*e*n-4*i*u*n*n+o*o*e*e-2*o*a*e*t-2*o*s*e*n+4*o*u*n*t+a*a*t*t-2*a*s*n*t+s*s*n*n)<0)&&(y=2*r*e*t-o*e*n-a*n*t+s*n*n,it(f,0)?[{x:-(e+t*(-y/h))/n,y:-y/h}]:[{x:-(e+t*((-n*(f=C(f))-y)/h))/n,y:(-n*f-y)/h},{x:-(e+t*((n*f-y)/h))/n,y:(n*f-y)/h}]))}function zn(n,t){var e=n.x,n=n.y;return[1,1,0,-2*e,-2*n,e*e+n*n-t*t]}function En(n,t,e,r){var i=n.x,o=n.y,a=r[0],s=r[1],n=t*t*s*s+e*e*a*a,r=t*t*a*a+e*e*s*s,a=2*(e*e-t*t)*s*a;return[n,r,a,-2*n*i-a*o,-a*i-2*r*o,n*i*i+a*i*o+r*o*o-t*t*e*e]}function Xn(n){return[{x:n[0].x-2*n[1].x+n[2].x,y:n[0].y-2*n[1].y+n[2].y},{x:2*n[1].x-2*n[0].x,y:2*n[1].y-2*n[0].y},{x:n[0].x,y:n[0].y}]}function Yn(n){return[{x:-n[0].x+3*n[1].x-3*n[2].x+n[3].x,y:-n[0].y+3*n[1].y-3*n[2].y+n[3].y},{x:3*n[0].x-6*n[1].x+3*n[2].x,y:3*n[0].y-6*n[1].y+3*n[2].y},{x:-3*n[0].x+3*n[1].x,y:-3*n[0].y+3*n[1].y},{x:n[0].x,y:n[0].y}]}function Mn(n,t,e){return n+e*(t-n)}function Fn(n,t){var e=1-n;return{x:e*t[0].x+n*t[1].x,y:e*t[0].y+n*t[1].y}}function qn(n,t){var e=1-n,r=e*e,e=2*e*n,n=n*n;return{x:r*t[0].x+e*t[1].x+n*t[2].x,y:r*t[0].y+e*t[1].y+n*t[2].y}}function On(n,t){var e=1-n,r=n*n,i=e*e,o=e*i,a=r*n,n=3*i*n,r=3*e*r;return{x:o*t[0].x+n*t[1].x+r*t[2].x+a*t[3].x,y:o*t[0].y+n*t[1].y+r*t[2].y+a*t[3].y}}function In(n,t,e,r,i,o,a){null==o&&(o=1,a=0),null==i&&(i=r);r*=S.cos(n),n=i*S.sin(n);return{x:t+o*r-a*n,y:e+a*r+o*n}}function Ln(n,t,e,r,i,o,a,s){return null==a&&(a=1,s=0),null==o&&(o=i),{x:e+a*(n*=i)-s*(t*=o),y:r+s*n+a*t}}function Rn(n,t,e,r,i,o,a,s,u){null==a&&(a=1,s=0),null==o&&(o=i);var l=ot(2*G(t),$)?.551915024494*rt(t):4*S.tan(t/4)/3,c=S.cos(n),f=S.sin(n),h=S.cos(n+t),t=S.sin(n+t);return u?[Ln(h,t,e,r,i,o,a,s),Ln(h+t*l,t-h*l,e,r,i,o,a,s),Ln(c-f*l,f+c*l,e,r,i,o,a,s),Ln(c,f,e,r,i,o,a,s)]:[Ln(c,f,e,r,i,o,a,s),Ln(c-f*l,f+c*l,e,r,i,o,a,s),Ln(h+t*l,t-h*l,e,r,i,o,a,s),Ln(h,t,e,r,i,o,a,s)]}function Qn(n){return{Tx:-n[0].x,Ty:-n[0].y,R:-S.atan2(n[n.length-1].y-n[0].y,n[n.length-1].x-n[0].x)}}i.Plane=n;var Nn=function(n,t){n=G(n),t=G(t);var e=0;return it(n,0)?t:it(t,0)?n:n<t?n*C(1+(e=t/n)*e):t<n?t*C(1+(e=n/t)*e):n*r};function Zn(n,t){return Nn(n.x-t.x,n.y-t.y)}function Dn(n,t){var e=n.x-t.x,t=n.y-t.y;return e*e+t*t}function Hn(n,t,e,r){return n*e+t*r}function Wn(n,t,e,r){return n*r-t*e}function Un(n,t,e,r){var i=Nn(n,t),o=Nn(e,r);return it(i,0)||it(o,0)?0:S.acos(nt(n/i*(e/o)+t/i*(r/o),-1,1))}function Jn(n,t,e,r){return rt(n*r-t*e)*Un(n,t,e,r)}function Kn(n,t,e){return Wn(n.x-e.x,n.y-e.y,t.x-e.x,t.y-e.y)}function nt(n,t,e){return S.min(S.max(n,t),e)}function tt(n){return 180*n/$}function et(n){return n*$/180}function rt(n){return n<0?-1:1}function it(n,t){return G(n-t)<Number.EPSILON}function ot(n,t,e){return null==e&&(e=u),G(n-t)<e}function at(n){return n.x||0}function st(n){return n.y||0}function ut(n,t,e){if(n)n.forEach(function(n){v.call(e,n)&&(t[n]=e[n])});else for(var r in e)v.call(e,r)&&(t[r]=e[r]);return t}function lt(n,e,t,r){var i=!1;if(e=e||_,x&&!1!==t){if(!t&&(i=!0,t=document.createElementNS("http://www.w3.org/2000/svg",n),r))for(var o=0,a=r.length;o<a;++o)t.appendChild(r[o]);Object.keys(e).forEach(function(n){(i||e[n][1])&&t.setAttribute(n,e[n][0])})}else t="<"+n+" "+Object.keys(e).reduce(function(n,t){return n+t+'="'+dt(e[t][0])+'" '},"")+(r?">"+dt(r)+"</"+n+">":"/>");return t}function ct(a,s,u,i){if(kt(a.onChange))return a;function l(t){a.$cb.forEach(function(n){n(t)})}var c=!0;i=i||ht;var f=function(n,t){for(var e=n;e<t;++e)!function(e){var n=dt(e),r=a[e];b(a,n,{get:function(){return r},set:function(n){s&&(n=s(n));var t=!i(r,n);u&&u(r),r=n,t&&c&&l({target:a,method:"set",added:{from:e,to:e}})},enumerable:!0})}(e)};if(a.$cb=[],a.onChange=function(n,t){var e;kt(n)&&(!1===t?-1!==(e=a.$cb.indexOf(n))&&a.$cb.splice(e,1):-1!==(e=a.$cb.indexOf(n))&&a.$cb.push(n))},s&&a.length)for(var n=0,t=a.length;n<t;++n)a[n]=s(a[n]);return["push","pop","shift","unshift","splice"].forEach(function(n){var o;a[n]=(o=n,function(){var n,t,e=arguments,r=null,i=a.length;return s&&("push"!==o&&"unshift"!==o||(e=Array.prototype.map.apply(e,s)),"splice"===o&&2<e.length&&(e=Array.prototype.slice.call(e,0,2).concat(Array.prototype.slice.call(e,2).map(s)))),"shift"!==o&&"unshift"!==o&&"splice"!==o||(c=!1),n=Array.prototype[o].apply(a,e),"splice"===o&&n.length?r=n:(0<i&&"pop"===o||"shift"===o)&&(r=[n]),r&&u&&r.forEach(u),"unshift"!==o&&"splice"!==o||(c=!0),t=a.length,("push"===o||"unshift"===o||"splice"===o)&&i<t&&f(i,t),"push"===o?l({target:a,method:o,added:{from:i,to:t}}):"unshift"===o?l({target:a,method:o,added:{from:0,to:t-i-1}}):"splice"===o&&2<e.length?l({target:a,method:o,added:{from:e[0],to:e[0]+e.length-3},deleted:r}):l({target:a,method:o,deleted:r}),n})}),f(0,a.length),a}function ft(t,n){if(!kt(t.onChange))return t;delete t.$cb,delete t.onChange,["push","pop","shift","unshift","splice"].forEach(function(n){t[n]=Array.prototype[n]});n=n?t.map(n):t.slice();return t.length=0,t.push.apply(t,n),t}function ht(n,t){return n===t}var yt=/^\s+|\s+$/gm,gt=String.prototype.trim?function(n){return n.trim()}:function(){return s.replace(yt,"")};function xt(n,t,e,r){var i=dt(n),o=i.length,n="";return o<t&&(e=e||" ",n=new Array(t-o+1).join(e),i=r?i+n:n+i),i}function pt(n,t){return n<0?dt(n):(!1===t?"":"+")+dt(n)}var mt=0,dt=String;function vt(n){return parseFloat(n)||0}function bt(n){return kt(n.toTex)?n.toTex():n.toString()}function Ct(n){return!isNaN(+n)}function $t(n){return"string"==typeof n||"[object String]"===t.call(n)}function wt(n){return"[object Array]"===t.call(n)}function _t(n){return"[object Object]"===t.call(n)&&"function"==typeof n.constructor&&"Object"===n.constructor.name}function kt(n){return"function"==typeof n}return i.Math.deg=tt,i.Math.rad=et,i.Math.hypot=Nn,i.Math.solveLinear=An,i.Math.solveQuadratic=Tn,i.Math.solveCubic=jn,i.Math.solveLinearLinear=Vn,i.Math.solveLinearQuadratic=Bn,i.Math.shuffle=function(n){for(var t,e,r=n.length-1;0<r;--r)e=n[t=S.round(S.random()*r)],n[t]=n[r],n[r]=e;return n},i.Geometry.linearBezierCurve=Fn,i.Geometry.quadraticBezierCurve=qn,i.Geometry.cubicBezierCurve=On,i.Geometry.ellipticArcCurve=In,i.Geometry.computeConvexHull=function(n){return Sn(n).map(M)},i});