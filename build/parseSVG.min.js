/**
*
*   Parse SVG utility (part of Geometrize library)
*   https://github.com/foo123/Geometrize
*
**/
!function(e,t,s){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=s.call(e)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return s.moduleUri=t.uri,s.call(e)}):t in e||(e[t]=s.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}("undefined"!=typeof self?self:this,"parseSVG",function(){"use strict";var o=/<(\/)?([a-z0-9_\-:]+?)\b\s*([^<>]*)\/?>/im,f=/([a-z0-9_\-:]+?)\b\s*(=\s*"([^"]*)")?/im,s=/[MLHVCSQTAZ]/gi,p=/(matrix|scale|rotate|translate|skewX|skewY)\s*\(([^\(\)]*)\)/im,h=/-?(?:(?:\d+\.\d+)|(?:\.\d+)|(?:\d+))/g,l=Object.prototype.hasOwnProperty,d=(Math,{});function y(t){return t.trim()}function m(t){return parseFloat(t||"")||0}function c(t){var e=(t=y(String(t))).match(s),l=t.split(s),c=[0,0],u=c;return e?e.reduce(function(t,e,s){var r,a,n,i,o,f=e===e.toLowerCase(),p=(y(l[s+1]||"").match(h)||[]).map(m);switch(e.toUpperCase()){case"M":2<=p.length&&(c=[(f?c[0]:0)+p[0],(f?c[1]:0)+p[1]],u=c);break;case"H":for(;1<=p.length;)r=[c[0],c[1]],a=[(f?r[0]:0)+p.shift(),r[1]],c=a,t.push({type:"Line",points:[r,a],H:!0});break;case"V":for(;1<=p.length;)a=[(r=[c[0],c[1]])[0],(f?r[1]:0)+p.shift()],c=a,t.push({type:"Line",points:[r,a],V:!0});break;case"L":for(;2<=p.length;)r=[c[0],c[1]],a=[(f?r[0]:0)+p.shift(),(f?r[1]:0)+p.shift()],c=a,t.push({type:"Line",points:[r,a]});break;case"A":for(;7<=p.length;)o={start:null,end:null,radiusX:p.shift(),radiusY:p.shift(),angle:p.shift(),largeArc:p.shift(),sweep:p.shift()},r=[c[0],c[1]],a=[(f?r[0]:0)+p.shift(),(f?r[1]:0)+p.shift()],c=a,o.start=r,o.end=a,t.push({type:"Arc",params:o});break;case"Q":for(;4<=p.length;)r=[c[0],c[1]],a=[(f?r[0]:0)+p.shift(),(f?r[1]:0)+p.shift()],n=[(f?r[0]:0)+p.shift(),(f?r[1]:0)+p.shift()],c=n,t.push({type:"Quadratic",points:[r,a,n]});break;case"T":for(;2<=p.length;)o=t.length?t[t.length-1]:d,r=[c[0],c[1]],n=[(f?r[0]:0)+p.shift(),(f?r[1]:0)+p.shift()],a="Quadratic"===o.type?[2*r[0]-o.points[1][0],2*r[1]-o.points[1][1]]:[r[0],r[1]],c=n,t.push({type:"Quadratic",points:[r,a,n],T:!0});break;case"C":for(;6<=p.length;)r=[c[0],c[1]],a=[(f?r[0]:0)+p.shift(),(f?r[1]:0)+p.shift()],n=[(f?r[0]:0)+p.shift(),(f?r[1]:0)+p.shift()],i=[(f?r[0]:0)+p.shift(),(f?r[1]:0)+p.shift()],c=i,t.push({type:"Cubic",points:[r,a,n,i]});break;case"S":for(;4<=p.length;)o=t.length?t[t.length-1]:d,r=[c[0],c[1]],n=[(f?r[0]:0)+p.shift(),(f?r[1]:0)+p.shift()],i=[(f?r[0]:0)+p.shift(),(f?r[1]:0)+p.shift()],a="Cubic"===o.type?[2*r[0]-o.points[2][0],2*r[1]-o.points[2][1]]:[r[0],r[1]],c=i,t.push({type:"Cubic",points:[r,a,n,i],S:!0});break;case"Z":r=[c[0],c[1]],a=[u[0],u[1]],u=c=a,t.push({type:"Line",points:[r,a],Z:!0})}return t},[]):[]}function u(t,e){var s,r,a,n,i=e.index||0;if(t=(t=t.slice(i)).match(o)){if(e.index=i+t.index+t[0].length,"/"===t[1])return{tag:t[2].toLowerCase(),end:!0};i=function(t){for(var e,s={};e=t.match(f);)s[e[1].toLowerCase()]=!e[3]||y(e[3]),t=t.slice(e.index+e[0].length);return s}(t[3]);return i.style=(r={"stroke-width":1,stroke:1,"stroke-opacity":1,"stroke-linecap":1,"stroke-linejoin":1,fill:1,"fill-opacity":1,"fill-rule":1},a={"stroke-width":1,"stroke-opacity":1,"fill-opacity":1},n=y((s=i).style||"").split(";").reduce(function(t,e){var s=y(e).split(":"),e=y(s[0]),s=y(s.slice(1).join(":"));return l.call(r,e)&&(t[e]=1===a[e]?m(s):s),t},{}),Object.keys(r).forEach(function(t){l.call(s,t)&&(n[t]=(1===a[t]?m:y)(s[t]))}),n),i.transform=function(t){for(var e,s=y(t.transform||""),r=[];e=s.match(p);)r.push([y(e[1]).toLowerCase(),(y(e[2]).match(h)||[]).map(m)]),s=s.slice(e.index+e[0].length);return r.length?r:null}(i),{tag:t[2].toLowerCase(),atts:i}}}function t(t){return function t(e,s,r){for(var a,n,i,o,f,p=[],l=r?1:0;a=u(e,s);)switch(a.tag){case"line":a.end||p.push({type:"Line",points:[[m(a.atts.x1),m(a.atts.y1)],[m(a.atts.x2),m(a.atts.y2)]],transform:a.atts.transform,style:a.atts.style});break;case"polyline":a.end||p.push({type:"Polyline",points:((a.atts.points||"").match(h)||[]).map(m).reduce(function(t,e,s){return s%2?t[(s-1)/2][1]=e:t.push([e,0]),t},[]),transform:a.atts.transform,style:a.atts.style});break;case"polygon":a.end||p.push({type:"Polygon",points:((a.atts.points||"").match(h)||[]).map(m).reduce(function(t,e,s){return s%2?t[(s-1)/2][1]=e:t.push([e,0]),t},[]),transform:a.atts.transform,style:a.atts.style});break;case"rect":a.end||(n=m(a.atts.x),i=m(a.atts.y),o=m(a.atts.width),f=m(a.atts.height),p.push({type:"Polygon",points:[[n,i],[n+o,i],[n+o,i+f],[n,i+f]],transform:a.atts.transform,style:a.atts.style}));break;case"circle":a.end||p.push({type:"Circle",params:{center:[m(a.atts.cx),m(a.atts.cy)],radius:m(a.atts.r)},transform:a.atts.transform,style:a.atts.style});break;case"ellipse":a.end||p.push({type:"Ellipse",params:{center:[m(a.atts.cx),m(a.atts.cy)],radiusX:m(a.atts.rx),radiusY:m(a.atts.ry),angle:0},transform:a.atts.transform,style:a.atts.style});break;case"path":a.end||p.push({type:"Path",nodes:c(a.atts.d||""),transform:a.atts.transform,style:a.atts.style});break;case"g":if(a.end){if("g"===r&&0==--l)return p}else"g"===r&&++l,p.push({type:"Group",nodes:t(e,s,"g"),transform:a.atts.transform,style:a.atts.style});break;case"svg":if(a.end){if("svg"===r&&0==--l)return p}else"svg"===r&&++l,p.push({type:"SVG",viewBox:a.atts.viewbox?(a.atts.viewbox.match(h)||[]).map(m):[0,0,0,0],nodes:t(e,s,"svg")})}return p}(y(String(t)),{index:0})}return t.parsePath=c,t});